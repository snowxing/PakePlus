(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-appmy"],{"09a9":function(t,n,i){"use strict";i.r(n);var e=i("4f5c"),o=i.n(e);for(var a in e)["default"].indexOf(a)<0&&function(t){i.d(n,t,(function(){return e[t]}))}(a);n["default"]=o.a},"299b":function(t,n,i){var e=i("c86c");n=e(!1),n.push([t.i,"uni-page-body[data-v-1b74a9c8]{background:#f8f7f6}body.?%PAGE?%[data-v-1b74a9c8]{background:#f8f7f6}.my-container .top[data-v-1b74a9c8]{width:100%;height:%?290?%;background:#1c77dc;display:flex;justify-content:center;align-items:center\r\n  /* flex-direction: column; */}.my-container .top .logo[data-v-1b74a9c8]{width:%?130?%;height:%?130?%;background:#f2f2f2;border-radius:50%}.my-container .top .logo uni-text[data-v-1b74a9c8]{display:inline-block;font-size:%?80?%;color:#1c77dc;margin:%?28?% 0 0 %?25?%}.my-container .box .item[data-v-1b74a9c8]{width:100%;height:%?100?%;background:#fff;display:flex;justify-content:space-between;align-items:stretch;align-items:center;padding:0 %?30?%}.my-container .box .item.border-bottom[data-v-1b74a9c8]{border-bottom:%?1?% solid #e6e6e6}.my-container .box .item uni-view[data-v-1b74a9c8]{display:flex;justify-content:center}.my-container .box .item .iconfont[data-v-1b74a9c8]{color:#1c77dc;font-size:%?40?%}.my-container .box .item .iconliebiaojiantou-[data-v-1b74a9c8]{color:#ccc}.my-container .box .quit[data-v-1b74a9c8]{width:100%;height:%?100?%;line-height:%?100?%;text-align:center;background:#fff}.user-a[data-v-1b74a9c8]{color:#1c77dc;text-decoration:none /* 去掉下划线 */}",""]),t.exports=n},"4f5c":function(t,n,i){"use strict";i("6a54");var e=i("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e(i("2634")),a=e(i("2fdc"));i("64aa"),i("c9b5"),i("d5c6"),i("5a56"),i("f074");var c=i("1575"),s=i("4241"),u=i("6e31"),l={data:function(){var t;return{nameflag:!0,compnay:"试用企业",department:"待设置",img:"",name:"",ename:"",autoLogin:!0,wechatLogin:!1,info:"",account:(null===(t=uni.getStorageSync("info"))||void 0===t?void 0:t.account.substring(4))||"未设置",info2:{},isFromCenter:!1,isApp:!1,invitation:""}},components:{},onLoad:function(t){this.$route.query.hasOwnProperty("fromCenter")&&this.setData({isFromCenter:!0}),console.log(222222222222);uni.setStorageSync("appurl","/pages/my/my"),this.getlist(),this.info2=uni.getStorageSync("info"),this.department=uni.getStorageSync("info").department,console.log(this.info2)},onReady:function(){this.setData({autoLogin:1==Number(uni.getStorageSync("autologin"))}),console.log()},onShow:function(){console.log("on show")},onHide:function(){console.log("on onHide")},onUnload:function(){console.log("on unload")},onPullDownRefresh:function(){},onReachBottom:function(){},mounted:function(){uni.getStorageSync("isApp")&&this.setData({isApp:!0}),this.invitation=this.encodeBase64(uni.getStorageSync("info").id)},methods:{gotoAgreement:function(){var t=uni.getStorageSync("appFrom");if("zyxk"===t)window.location.href="https://zay.saveus.cn/user_guide.html";else if("control"===t)window.location.href="https://zay.saveus.cn/user_guide_sktx.html";else{var n="https://zay.saveus.cn/user_guide_"+t+".html";window.location.href=n}},logingOut:function(){s.api.login_out({},(function(t){console.log(t),200==t.code&&(uni.removeStorageSync("info"),uni.removeStorageSync("returnTo"),uni.removeStorageSync("appurl"),uni.removeStorageSync("servername"),uni.removeStorageSync("sso_token"),uni.removeStorageSync("appid"),uni.removeStorageSync("appsecret"),uni.removeStorageSync("account"),uni.removeStorageSync("autologin"),uni.removeStorageSync("wechatlogin"),uni.navigateTo({url:"/pages/home/login"}))}))},accountCancellation:function(){var t=this;uni.showModal({title:"提示",showCancel:!0,content:"确认要注销账号吗？",success:function(n){console.log("query",n),!0===n.confirm&&s.api.destroy_user({},(function(n){200===n.code?(uni.showToast({title:"注销成功"}),t.logingOut()):u.tool.showToast({title:"注销失败"})}))}})},initFuc:function(){console.log(222222222222);uni.setStorageSync("appurl","/pages/my/my"),this.getlist(),this.info2=uni.getStorageSync("info"),this.department=uni.getStorageSync("info").department,console.log(this.info2)},namechange:function(){var t=this;console.log(this.info2.name),s.api.app_editpeople({name:this.info2.name},(function(n){var i=uni.getStorageSync("info");i.name=t.info2.name,uni.setStorageSync("info",i)}))},getlist:function(){var t=this;s.api.app_getappcompnay_list({},(function(n){t.info=n,t.compnay=n.data.name||"试用企业"}))},gotopeople:function(){c.wxapi.openUrl("/pages/my/updatePeople")},gotopost:function(){"待设置"==this.department||c.wxapi.openUrl("/pages/my/updatePost")},gotocompany:function(){c.wxapi.openUrl("/pages/my/updateCompany")},gotoMyTask:function(){c.wxapi.openUrl("/pages/task/list?type=1")},gotoNoticeTask:function(){c.wxapi.openUrl("/pages/task/list?type=2")},gotoMyMessage:function(){c.wxapi.openUrl("/pages/message/list?type=1")},closeWechat:function(t){uni.setStorageSync("wechatlogin",t.detail.value?1:0),t.detail.value?u.tool.info("下次采用微信自动登录"):u.tool.info("不再使用微信登录")},closeAutoLogin:function(t){console.log(t),uni.setStorageSync("autologin",t.detail.value?1:0),t.detail.value?u.tool.info("在下次登录的时候,将自动绑定您的管理平台账号"):u.tool.info("您的自动登录已关闭,下次登录将采用账号密码登录")},gotoSet:function(){c.wxapi.openUrl("/pages/my/set")},quit:function(){uni.showModal({title:"提示",content:"确定退出登录？",success:function(t){t.confirm?(s.api.logout(),uni.removeStorageSync("account"),uni.removeStorageSync("cookie"),uni.removeStorageSync("token"),uni.removeStorageSync("info"),uni.setStorageSync("autologin",0),console.log("/home/index.vue logout and need login"),c.wxapi.openUrl("/pages/home/login",2),uni.setStorageSync("scrollTop",0)):t.cancel&&console.log("用户点击取消")}})},copyText:function(t){return(0,a.default)((0,o.default)().mark((function n(){return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:uni.setClipboardData({data:t,success:function(){console.log("复制成功"),uni.showToast({title:"复制成功",icon:"success",duration:2e3})},fail:function(){console.log("复制失败"),uni.showToast({title:"复制失败",icon:"none",duration:2e3})}});case 1:case"end":return n.stop()}}),n)})))()},encodeBase64:function(t){"string"!==typeof t&&(t=String(t));var n=btoa(t);return n}}};n.default=l},"9dec":function(t,n,i){"use strict";var e=i("ebc0"),o=i.n(e);o.a},d56b:function(t,n,i){"use strict";i.d(n,"b",(function(){return e})),i.d(n,"c",(function(){return o})),i.d(n,"a",(function(){}));var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{staticClass:"my-container"},[i("v-uni-view",{staticClass:"top",staticStyle:{display:"flex","justify-content":"flex-start"}},[i("v-uni-view",{staticClass:"logo",staticStyle:{margin:"0 40upx"}},[t.info2.avatar?i("v-uni-image",{staticStyle:{height:"130upx",width:"130upx","border-radius":"50%"},attrs:{src:"https://zay.saveus.cn"+t.info2.avatar,mode:""}}):i("v-uni-text",{staticClass:"iconfont iconzhianyunlogo-"})],1),i("v-uni-view",{staticStyle:{margin:"0 20upx"}},[t.info2?i("v-uni-view",{staticClass:"font32 color-white mt-10"},[t._v("姓名："+t._s(t.info2.name))]):t._e(),i("v-uni-view",{staticClass:"font26 mt-5",staticStyle:{color:"#f7f7f7"}},[t._v("企业名称："+t._s(t.compnay))])],1)],1),i("v-uni-view",{staticClass:"box"},[i("v-uni-view",{staticClass:"item mt-30",staticStyle:{"margin-top":"0px","border-bottom":"1px solid #eee"}},[i("v-uni-view",[i("v-uni-text",{staticClass:"font32 ml-10"},[t._v("企业")])],1),i("v-uni-view",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotocompany.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{"margin-right":"20upx",opacity:"0.8",height:"60upx","line-height":"60upx"}},[t._v(t._s(t.compnay))]),i("v-uni-view",{staticClass:"iconfont iconliebiaojiantou-",staticStyle:{position:"relative",top:"6upx"}})],1)],1),i("v-uni-view",{staticClass:"item mt-30",staticStyle:{"margin-top":"0px","border-bottom":"1px solid #eee"}},[i("v-uni-view",[i("v-uni-text",{staticClass:"font32 ml-10"},[t._v("部门")])],1),i("v-uni-view",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotopeople.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{"margin-right":"20upx",opacity:"0.8",height:"60upx","line-height":"60upx"}},[t._v(t._s(t.department))]),i("v-uni-view",{staticClass:"iconfont iconliebiaojiantou-",staticStyle:{position:"relative",top:"6upx"}})],1)],1),i("v-uni-view",{staticClass:"item mt-30",staticStyle:{"margin-top":"0px","border-bottom":"1px solid #eee"}},[i("v-uni-view",[i("v-uni-text",{staticClass:"font32 ml-10"},[t._v("岗位")])],1),i("v-uni-view",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotopost.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{"margin-right":"20upx",opacity:"0.8",height:"60upx","line-height":"60upx"}},[t._v(t._s(t.info2.post?t.info2.post:"待设置"))]),i("v-uni-view",{staticClass:"iconfont iconliebiaojiantou-",staticStyle:{position:"relative",top:"6upx"}})],1)],1),i("v-uni-view",{staticClass:"item mt-30 border-bottom",staticStyle:{"margin-top":"0px"}},[i("v-uni-view",[i("v-uni-text",{staticClass:"font32 ml-10"},[t._v("姓名")])],1),i("v-uni-view",{staticStyle:{"letter-spacing":"8upx"}},[i("v-uni-input",{staticStyle:{height:"60upx","line-height":"60upx",padding:"10upx 10upx","text-align":"right"},attrs:{type:"text",placeholder:"请输入"},on:{blur:function(n){arguments[0]=n=t.$handleEvent(n),t.namechange.apply(void 0,arguments)}},model:{value:t.info2.name,callback:function(n){t.$set(t.info2,"name",n)},expression:"info2.name"}})],1)],1),i("v-uni-view",{staticClass:"item mt-30 border-bottom",staticStyle:{"margin-top":"0px"}},[i("v-uni-view",[i("v-uni-text",{staticClass:"font32 ml-10"},[t._v("工号")])],1),i("v-uni-view",{staticStyle:{"margin-right":"5upx"}},[t._v(t._s(t.account))])],1),t.isApp?i("v-uni-view",{staticClass:"item mt-30 border-bottom",staticStyle:{"margin-top":"0px"}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[i("v-uni-text",{staticClass:"font32 ml-10"},[t._v("邀请码")])],1),i("v-uni-view",{staticStyle:{"letter-spacing":"8upx","margin-right":"5upx",display:"flex","align-items":"center"}},[i("v-uni-text",[t._v(t._s(t.invitation))]),i("v-uni-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.copyText(t.invitation)}}},[t._v("复制")])],1)],1):t._e(),i("v-uni-view",{staticClass:"item mt-30 border-bottom",staticStyle:{"margin-top":"0px"}},[i("v-uni-view",[i("v-uni-text",{staticClass:"font32 ml-10"},[t._v("版本号")])],1),i("v-uni-view",{staticStyle:{"letter-spacing":"8upx","margin-right":"5upx"}},[t._v("1.7.4")])],1),t.isApp?i("v-uni-view",{staticClass:"item mt-30 border-bottom",staticStyle:{"margin-top":"0px"}},[i("v-uni-view",[i("v-uni-text",{staticClass:"font32 ml-10"},[t._v("用户隐私指引")])],1),i("v-uni-view",{staticStyle:{"letter-spacing":"8upx","margin-right":"5upx"}},[i("v-uni-text",{staticClass:"user-a",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.gotoAgreement.apply(void 0,arguments)}}},[t._v("《用户隐私协议》")])],1)],1):t._e(),i("v-uni-view",{staticStyle:{"margin-top":"40px",display:"flex","justify-content":"center"}},[t.isApp?i("v-uni-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.logingOut.apply(void 0,arguments)}}},[t._v("退出登录")]):t._e(),t.isApp?i("v-uni-button",{staticStyle:{width:"120px"},attrs:{type:"warn"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.accountCancellation.apply(void 0,arguments)}}},[t._v("账号注销")]):t._e()],1)],1),i("v-footer",{directives:[{name:"show",rawName:"v-show",value:t.isFromCenter,expression:"isFromCenter"}],attrs:{active:3}})],1)},o=[]},e359:function(t,n,i){"use strict";i.r(n);var e=i("d56b"),o=i("09a9");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(n,t,(function(){return o[t]}))}(a);i("9dec");var c=i("828b"),s=Object(c["a"])(o["default"],e["b"],e["c"],!1,null,"1b74a9c8",null,!1,e["a"],void 0);n["default"]=s.exports},ebc0:function(t,n,i){var e=i("299b");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var o=i("967d").default;o("098e7d9a",e,!0,{sourceMap:!1,shadowMode:!1})}}]);