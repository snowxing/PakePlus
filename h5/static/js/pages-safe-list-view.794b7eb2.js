(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-safe-list-view"],{"873a":function(e,t,i){"use strict";i.r(t);var a=i("defe"),n=i.n(a);for(var l in a)["default"].indexOf(l)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(l);t["default"]=n.a},a0cb:function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,"uni-page-body[data-v-788997de]{background-color:#eee!important}body.?%PAGE?%[data-v-788997de]{background-color:#eee!important}.shangbao[data-v-788997de]{position:fixed;bottom:%?20?%;left:15%;z-index:4;width:70%}",""]),e.exports=t},b39b:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-page-content",{attrs:{items:e.items}}),i("v-page-content",{attrs:{items:e.sub_items}}),i("v-uni-button",{staticClass:"shangbao",attrs:{size:"mini",type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoPage(e.items)}}},[e._v("隐患上报")])],1)},n=[]},ceb0:function(e,t,i){var a=i("a0cb");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("967d").default;n("8f80cf08",a,!0,{sourceMap:!1,shadowMode:!1})},dc1b:function(e,t,i){"use strict";var a=i("ceb0"),n=i.n(a);n.a},defe:function(e,t,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("fcf3"));i("64aa"),i("bf0f"),i("2797"),i("aa9c");var l=i("4241"),o=(i("1575"),i("6e31")),d=getApp({allowDefault:!0}),s={data:function(){return{data2:{},items:[],sub_items:[],id:0,name:"",titleConfig:[{field:"name",title:"风险源",type:"text"},{field:"area_name",title:"场所区域",type:"text"},{field:"category_detail",title:"类型",type:"text"},{field:"map",title:"坐标",type:"map"},{field:"risk",title:"风险",type:"text"},{field:"level",title:"风险等级",type:"text"},{field:"policy_data",title:"管控措施与标准依据",type:"table",header:[{key:"risk",name:"风险"},{key:"policy",name:"管控措施"},{key:"stardard",name:"标准依据"},{key:"punishment",name:"处罚措施"}]},{field:"check_freq",title:"检查频次",type:"text"},{field:"check_freq_type",title:"检查周期",type:"text"},{field:"post_name",title:"岗位",type:"text"},{field:"department_name",title:"部门",type:"text"},{field:"emergency_data",title:"应急措施",type:"table",header:[{key:"risk",name:"风险"},{key:"policy",name:"应急措施"}]}],cateTitleConfig:{1:[{field:"specification",title:"规格",type:"text"},{field:"special",title:"设备类型",type:"text"},{field:"status",title:"状态",type:"text"},{field:"install_date",title:"安装日期",type:"text"},{field:"mcontent",title:"维保内容",type:"text"}],2:[{field:"factors",title:"危险因素",type:"text"},{field:"accidents",title:"可能导致的事故",type:"text"},{field:"category_detail",title:"安装日期",type:"text"}],3:[{field:"num",title:"数量",type:"text"},{field:"unit",title:"数量单位",type:"text"},{field:"dangerous",title:"火灾危险性",type:"text"},{field:"purpose",title:"用途",type:"text"},{field:"expire_date",title:"过期时间",type:"text"},{field:"in_date",title:"入库时间",type:"text"},{field:"out_date",title:"出库时间",type:"text"}],4:[{field:"item_1",title:"作业描述",type:"table",header:[{key:"content",name:"内容"}]}],5:[{field:"desc",title:"岗位描述",type:"text"},{field:"req_cert",title:"证书要求",type:"text"},{field:"req_edu",title:"学历要求",type:"text"},{field:"req_age",title:"年龄要求",type:"text"},{field:"desc",title:"岗位描述",type:"text"},{field:"req_gender",title:"性别要求",type:"text"},{field:"req_healthy",title:"健康要求",type:"text"},{field:"req_other",title:"其它要求",type:"text"}]}}},components:{},props:{},onLoad:function(e){var t=e.id;this.setData({id:Number(t)}),this.load_data()},methods:{gotoPage:function(){console.log(this.items),uni.navigateTo({url:"/pages/task/form?task_id=0&app_id=2&risk_id="+this.id+"&risk_name="+this.name})},downloadFile:function(e){var t=d.globalData.apiPrefix+e.currentTarget.dataset.url;o.tool.openFile(t)},load_data:function(){var e=this;l.api.risk_get({id:this.id},(function(t){if(t){var i=function(){if(void 0==t.data.extension)return o.tool.info("加载风险源数据失败"),{v:void 0};e.setData({name:t.data.extension.name}),t=t.data,uni.setNavigationBarTitle({title:t.extension.name}),t.extension.area=t.extension.area_name,t.extension.post=t.extension.post_name,t.extension.risk=t.extension.risk_obj.name;var i=t.extension.risk_obj.id.split(","),a=t.extension.risk_obj.name.split(","),n=t.extension.policy.length>0?JSON.parse(t.extension.policy):[],l=t.extension.emergency.length>0?JSON.parse(t.extension.emergency):[],d=[],s=[],r=function(e){for(var t in n)i[e]==t&&n[t].forEach((function(t){d.push({risk:a[e],stardard:t.stardard,policy:t.policy,punishment:t.punishment})}));for(var o in l)i[e]==o&&l[o].forEach((function(t){s.push({risk:a[e],policy:t.policy})}))};for(var f in i)r(f);t.extension.emergency_data=s,t.extension.policy_data=d,console.log("all policy",d),e.data2=t.data;var c=o.tool.translateDetail(t.extension,e.titleConfig);e.items=c;var p=t.extension.doc_type,u=o.tool.translateDetail(t.data,e.cateTitleConfig[p]);e.sub_items=u,e.setData({items:c,sub_items:u})}();if("object"===(0,n.default)(i))return i.v}}))}}};t.default=s},f5da:function(e,t,i){"use strict";i.r(t);var a=i("b39b"),n=i("873a");for(var l in n)["default"].indexOf(l)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(l);i("dc1b");var o=i("828b"),d=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"788997de",null,!1,a["a"],void 0);t["default"]=d.exports}}]);