(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-task-form"],{"0166":function(t,a,e){var i=e("bbeb");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("967d").default;n("3ad3ae24",i,!0,{sourceMap:!1,shadowMode:!1})},"0cd0":function(t,a,e){var i=e("c86c");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.headerBox[data-v-60e86bfc]{width:100%;display:flex;background-color:#eee;display:flex;padding:%?20?%;box-sizing:border-box}.headerBox uni-view[data-v-60e86bfc]{flex:1;display:flex;align-items:center;justify-content:center}.headerBox uni-view .moban[data-v-60e86bfc]{display:inline-block;font-size:15px;padding:0 15px;color:#fff;background:#1c77dc;min-width:80px;height:30px;line-height:30px;-webkit-border-radius:4px;border-radius:4px;text-align:center}.headerBox uni-view .moban1[data-v-60e86bfc]{display:inline-block;font-size:15px;padding:0 15px;color:#fff;background:#1c77dc;min-width:80px;height:30px;line-height:30px;-webkit-border-radius:4px;border-radius:4px;text-align:center}',""]),t.exports=a},"31fc":function(t,a,e){"use strict";var i=e("bcf3"),n=e.n(i);n.a},40374:function(t,a,e){"use strict";e.r(a);var i=e("74c6"),n=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},"4c06":function(t,a,e){"use strict";e.r(a);var i=e("72c5"),n=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=n.a},"72c5":function(t,a,e){"use strict";e("6a54");var i=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("bf0f"),e("2797"),e("aa77"),e("aa9c"),e("d4b5"),e("5ef2"),e("4100"),e("dd2b"),e("64aa");var n=e("4241"),o=e("1575"),s=e("6e31"),r=i(e("f989")),d=i(e("044e")),l=getApp({allowDefault:!0}),c={data:function(){return{tabL:[{name:"事务流程"}],draftFlag:!1,tabIndex:0,baseflag:!1,viewtask:!1,canvasImgUrl:"",canvasflag:!1,templateflag:!1,templatename:"",templateobj:{},canimg:"",flagimg:!1,imgUrl:getApp({allowDefault:!0}).globalData.imgUrl,sign:"",title:"",typeIndex:1,tid:0,hid:0,rid:0,nid:0,fid:0,typesShow:!0,forms:[],submitObj:{},app_id:0,trans_id:0,task_id:0,form_id:0,param:"",is_time_limit:0,source_user:[],title_config:{4:"input_1",2:"input_1",7:"",6:"input_1",8:"input_2",9:"input_1",5:"input_2",3:"input_2",10:"",11:"",12:"input_1",14:"",15:"input_1"},showRatePop:!1,rateList:[{value:1,selected:!1,name:"差",class:"rate-tag"},{value:2,selected:!1,name:"中",class:"rate-tag"},{value:3,selected:!0,name:"良",class:"rate-tag .select-tag-3"},{value:4,selected:!1,name:"优",class:"rate-tag"}],cacheKey:"",lastRowIndex:0,pageId:"",responseRes:null}},components:{formHeader:r.default,Canvasname:d.default},props:["app","task"],computed:{},onLoad:function(t){this.viewtask=t.viewtask,this.dep=t.dep,this.loadTask(t),this.loadTitle(t)},mounted:function(){if(this.app){var t={app_id:this.app,task_id:this.task};this.loadTask(t),this.loadTitle(t)}},methods:{canvasImg:function(){this.canvasflag=!0},change:function(){},fatherimg:function(t){var a=this;this.canvasflag=!1;var e={base64_file:t};n.api.uploader_image(e,(function(t){a.canvasImgUrl=t.data.url}),(function(t){console.log(t)}))},closeImage:function(){this.flagimg=!1},imgview:function(t){this.flagimg=!0,this.canimg=this.imgUrl+t},shangbao:function(t){uni.navigateTo({url:"/pages1/meInfo/yinhuan"})},loadTitle:function(t){},loadTask:function(t){var a=0,e=0;if(this.tid=0,this.hid=0,this.rid=0,this.nid=0,t.fid&&(this.fid=t.fid),l.globalData.param=t.param,l.globalData.relation=[],l.globalData.form_data={},l.globalData.form_cache={},l.globalData.limit_department={},l.globalData.area_limit={},l.globalData.risk_limit={category_id:0,category_field:{}},this.pageId=t.app_id?t.app_id:"",0==t.task_id){this.setData({hid:void 0===t.hid?0:t.hid,tid:void 0===t.tid?0:t.tid,rid:void 0===t.rid?0:t.rid,nid:void 0===t.nid?0:t.nid,fid:void 0===t.fid?0:t.fid}),a=this.app?this.app:t.app_id;var i=t.param;e=0,this.param=i,this.setData({app_id:a,task_id:e,param:i}),n.api.get_app_list({_cache:!0},(function(a){a.data.forEach((function(a){a.app_list.forEach((function(a){t.app_id==a.id&&uni.setNavigationBarTitle({title:a.name})}))}))})),this.launchTask(),l.globalData.task_type=1}else{a=0,e=this.task?this.task:t.task_id;var o=t.param,s=t.trans_id;this.param=o,this.setData({app_id:a,task_id:e,trans_id:s,param:o}),this.openTask()}},openTask:function(){var t=this;uni.showLoading({title:"加载中",mask:!0}),n.api.task_get_data({task_id:this.task_id,transid:this.trans_id},(function(a){var e,i,n;uni.hideLoading(),t.app_id=a.data.app_id,t.task_id=a.data.taskid;var o=[];t.sign=a.data.sign,a.data.forms.length>=1&&(a.data.forms[0].send_uid==getApp().globalData.user.userid?l.globalData.task_type=1:l.globalData.task_type=0);for(var s=function(t){var e=a.data.forms[t].formid;void 0!=o.find((function(t){return t==e}))&&(a.data.forms[t].formid=a.data.forms[t].formid+t),o.push(a.data.forms[t].formid)},r=a.data.forms.length-1;r>=0;r--)s(r);t.setData({task_id:a.data.taskid,forms:a.data.forms,source_user:a.data.source_user,title:null===(e=a.data.forms[a.data.forms.length-1])||void 0===e?void 0:e.title}),t.setData({form_id:null===(i=a.data.forms[a.data.forms.length-1])||void 0===i?void 0:i.formid}),t.setData({is_time_limit:null===(n=a.data.forms[a.data.forms.length-1])||void 0===n?void 0:n.is_time_limit})}))},launchTask:function(){var t=this;uni.setStorageSync("condidateIsadmin",""),l.globalData.currentTaskPage=1,uni.showLoading({title:"加载中",mask:!0}),this.viewtask?n.api.event_get({transid:this.tid},(function(a){a.data.forms.length<1?t.baseflag=!0:(uni.setStorageSync("condidateIsadmin",a.data.isadmin),uni.hideLoading(),t.app_id=a.data.app_id,t.task_id=a.data.taskid,t.sign=a.data.sign,t.setData({forms:a.data.forms,source_user:a.data.source_user,title:a.data.forms[a.data.forms.length-1].title}),t.setData({form_id:a.data.forms[a.data.forms.length-1].formid}),t.setData({is_time_limit:a.data.forms[a.data.forms.length-1].is_time_limit}),t.draftFlag=s.tool.hasFindCache(a.data.forms[a.data.forms.length-1].formid))})):n.api.process_start_data({app_id:this.app_id,tid:this.tid,hid:this.hid,rid:this.rid,nid:this.nid,param:this.param,fid:this.fid},(function(a){uni.setStorageSync("condidateIsadmin",a.data.isadmin),uni.hideLoading(),t.app_id=a.data.app_id,"11"==t.app_id&&1==t.dep&&a.data.forms[0].inputs[1].row[0].pop(),t.sign=a.data.sign,t.responseRes=a,t.draftFlag=s.tool.hasFindCache(a.data.forms[a.data.forms.length-1].formid),t.draftFlag||t.giveupDraft()}))},useDraft:function(){var t=this.responseRes;this.forms=t.data.forms,this.freshFormValue(t.data.forms[t.data.forms.length-1]),this.setData({task_id:t.data.taskid,forms:t.data.forms,source_user:t.data.source_user,title:t.data.forms[t.data.forms.length-1].title}),this.setData({form_id:t.data.forms[t.data.forms.length-1].formid,is_time_limit:t.data.forms[t.data.forms.length-1].is_time_limit}),this.setData({forms:t.data.forms})},giveupDraft:function(){var t=this.responseRes;this.forms=t.data.forms,s.tool.clearFormCache(this.forms[this.forms.length-1].formid),this.setData({task_id:t.data.taskid,forms:t.data.forms,source_user:t.data.source_user,title:t.data.forms[t.data.forms.length-1].title}),this.setData({form_id:t.data.forms[t.data.forms.length-1].formid,is_time_limit:t.data.forms[t.data.forms.length-1].is_time_limit}),this.setData({forms:t.data.forms})},freshFormValue:function(t){var a=this;t.append=!1,t.inputs.forEach((function(e){if("dynamic"===e.type)(function(){var i=e.field,n=s.tool.getCacheFormData(t.formid,e.field);if(void 0!=n){var o=[];t.append=!0;var r=function(t){var a=n["data"][t],i=JSON.parse(JSON.stringify(e.row[0]));i.forEach((function(t){var e=a[t.field];void 0!=e&&("treeselect"==t.type?e.length>0&&(t.options.push({value:e[0].id,label:e[0].title}),t.value=e[0].id):t.value=e)})),o.push(i)};for(var d in n["data"])r(d);e.row=o,s.tool.removeFormData(t.formid,e.field,-1)}var l=function(t){e.row[t].forEach((function(e){0==e.value.length&&"switch"==e.type&&(e.value=e.props.falseValue),a.freshFormNode(i+"|"+e.field,e.value,void 0==e.options?null:e.options,t)}))};for(var c in e.row)l(c)})();else if("static"==e.type);else{var i=s.tool.getCacheFormData(t.formid,e.field);if(i instanceof Array){if(i&&void 0!=i&&i.length>0){for(var n=[],o=[],r=0;r<i.length;r++)o.push({value:i[r].id,label:i[r].title}),i[r].id?n.push(i[r].id):n.push(i[r]);-1!=e.field.indexOf("treeselect")&&(e.options=o),e.value=n}}else void 0!=i&&(e.value=i);a.freshFormNode(e.field,e.value,void 0==e.options?null:e.options,-1)}}))},freshFormNode:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,n=t;i>=0&&(n+="|"+i);var o=[];a instanceof Array&&null!=e?a.forEach((function(t){e.forEach((function(a){a.value==t&&o.push({id:a.value,title:a.label})}))})):o=a;var s={detail:{field:n,value:o}};this.trigger(s)},trigger_del:function(t){var a=t.detail.value,e=t.detail.field,i=Object.assign({},this.submitObj);if(void 0!=i[e])for(var n in i[e])i[e][n].sort==a&&i[e].splice(n,1);s.tool.removeFormData(t.detail.formid,t.detail.field,t.detail.value),this.setData({submitObj:i})},trigger:function(t){var a=t.detail.field;if(void 0!=a&&0!=a.length&&t.detail.formid===this.forms[this.forms.length-1].formid){1!=t.detail.auto&&(this.cacheKey=s.tool.cacheFormData(this.app_id,t.detail.formid,a,t.detail.value));var e=Object.assign({},this.submitObj),i=a.split("|"),n=getApp({allowDefault:!0});if(void 0==n.globalData.form_data&&(n.globalData.form_data={}),n.globalData.form_data.nid=this.nid,3==i.length){a=i[0];var o=i[1],r=i[2],d=[];if(t.detail.value instanceof Array?"upload"==t.detail.type?d=t.detail.value:t.detail.value.forEach((function(t){t instanceof Object?d.push({value:t.id,label:t.title}):d.push(t)})):(d=null,4==t.detail.formid&&(0==r&&"date_8"==i[1]?getApp({allowDefault:!0}).globalData.fireEvent("change-date",{field:"date_10",value:t.detail.value}):"date_9"==i[1]&&r>=this.lastRowIndex&&(getApp({allowDefault:!0}).globalData.fireEvent("change-date",{field:"date_11",value:t.detail.value}),this.setData({lastRowIndex:r})))),void 0==e[a]){var l={};l[o]=null==d?t.detail.value:d,l["sort"]=r,e[a]=[l]}else{var c=!1,f=e[a];for(var u in f)if(f[u].sort==r){f[u][o]=null===d?t.detail.value:d,c=!0;break}if(!c){var p={};p[o]=null===d?t.detail.value:d,p["sort"]=r,e[a].push(p)}}}else{var v=[];t.detail.value instanceof Array?"upload"==t.detail.type||"casader"==t.detail.type||"basket"==t.detail.type?v=t.detail.value:t.detail.value.forEach((function(t){v.push({value:t.id,label:t.title})})):v=null,e[a]=null===v?t.detail.value:v}this.setData({submitObj:e}),n.globalData.submitObj=e}},getTitle:function(){var t=this.title_config[String(this.app_id)];return void 0==t?this.title:t.length>0&&void 0!==this.submitObj[t]?this.submitObj[t]:this.title+s.tool.getCurrentTime()},tasklook:function(){console.log("look")},taskaccept:function(){var t=this;this.templateobj.title=this.templatename,this.templateobj.action="99",n.api.process_launch(this.templateobj,(function(a){t.templateflag=!1,s.tool.info("已成功暂存")}))},button_trigger:function(t){var a=this;if(console.log(t,"eeeeeeeeeee"),110!=t.detail.value||void 0!=t.detail.confirm||void 0!=t.type)if(t.detail.value>2e4&&void 0==t.type){var e=t.detail.value-2e4;o.wxapi.openUrl("/pages/task/form?task_id=0&app_id="+e+"&param=launch|"+this.trans_id)}else if(this.submitObj.dynamic_1&&"-1"==this.submitObj.dynamic_1[0].radio_6)s.tool.info("隐患确认必须填写");else{var i=this.submitObj;i["form_id"]=this.form_id,i["is_time_limit"]=this.is_time_limit;var r=this.forms[this.forms.length-1].tplid,d={action:t.detail.value,app_id:this.app_id,tplid:r,nid:this.nid,fid:this.fid?this.fid:"",param:this.param,candidate:{},forms_data:JSON.stringify([i]),task_id:this.task_id,title:this.getTitle(),deadline_time:s.tool.getNowDate(),notice:[],sign:this.canvasImgUrl};if(l.globalData.formData=d,d.candidate=JSON.stringify(d.candidate),d.notice=JSON.stringify(d.notice),98!=t.detail.value)return"zc"==t.detail.type?(this.templateflag=!0,this.templatename="",void(this.templateobj=d)):void("jz"!=t.detail.type?(uni.showLoading({title:"正在提交，请稍后",mask:!0}),n.api.process_launch(d,(function(e){if(console.log(e,"resresres"),uni.hideLoading(),202==e.code){var i={};e.data[0].candidate.length>0?i[String(e.data[0].node_id)]=e.data[0].candidate:(i[String(e.data[0].node_id)]=[],void 0!=a.source_user&&100!=t.detail.value&&a.source_user.forEach((function(t){i[String(e.data[0].node_id)].push({uid:t.id,name:t.name})}))),l.globalData.formData.candidate=i,l.globalData.lstCacheKey=a.cacheKey,o.wxapi.openUrl("/pages/task/candidate")}else if(203==e.code||200==e.code)if(s.tool.clearFormData(a.cacheKey),203==e.code){if(e.data.jump){var n=e.data.jump,r="/pages/task/form?task_id=0&tid=0&hid=0&rid=0&fid=0&app_id="+n.app_id+"&nid="+n.nid+"&param="+n.param;return console.log(n,"20311",r),void o.wxapi.openUrl(r)}"85"==e.data.node_id||""==e.data.node_id?o.wxapi.openUrl("/pages/home/homeapp",2):o.wxapi.openUrl("/pages/task/form?app_id=0&trans_id="+e.data.transid)}else s.tool.info("操作成功"),o.wxapi.openUrl("/pages/task/list?type="+l.globalData.task_type,2);else if(206==e.code){s.tool.clearFormData(a.cacheKey);var d=getCurrentPages()[getCurrentPages().length-1];d.onLoad(d.options)}else 207==e.code?(s.tool.clearFormData(a.cacheKey),s.tool.info("模板已成功保存")):204==e.code&&(s.tool.clearFormData(a.cacheKey),a.setData({showRatePop:!0}))}))):13==this.forms[0].formid?uni.navigateTo({url:"/pages/safe/teshuwork?tabindex=1"}):uni.navigateTo({url:"/secure/threepage/renwumoban?formid="+this.forms[0].formid}));o.wxapi.openUrl("/pages/task/time-send")}else uni.showModal({title:"提示",content:"请确认是否撤回任务",success:function(e){e.confirm&&(t.detail.confirm=!0,a.button_trigger(t))}})},hasChooseRate:function(t){if(this.setData({showRatePop:!1}),t.detail.value){var a=this.rateList,e=3;a.forEach((function(t){t.selected&&(e=t.value)})),n.api.rate_commit({value:e,transid:this.trans_id},(function(t){s.tool.info("评价已成功提交"),o.wxapi.openUrl("/pages/task/list?type="+l.globalData.task_type,2)}))}},chooseRate:function(t){var a=t.currentTarget.dataset.id,e=this.rateList;e.forEach((function(t){Number(t.value)==Number(a)?(t.selected=!0,t.class="rate-tag  select-tag-"+a):(t.class="rate-tag",t.selected=!1)})),this.setData({rateList:e})},submit:function(){console.log(this.submitObj)}}};a.default=c},"74c6":function(t,a,e){"use strict";e("6a54"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i={props:["pageId"],data:function(){return{}},onLoad:function(t){},methods:{tiaoyong:function(t){"模板"===t?(console.log(t,this.pageId),12==this.pageId&&uni.navigateTo({url:"/pages/task/anquanjiacha"}),7==this.pageId&&uni.navigateTo({url:"/pages/task/anquanjiacha"})):"记录"===t&&(console.log(t,this.pageId),12==this.pageId&&uni.navigateTo({url:"/pages/task/anquanjiacha?current=1"}),7==this.pageId&&uni.navigateTo({url:"/pages/task/anquanjiacha?current=1"}))}}};a.default=i},"82d1":function(t,a,e){"use strict";e.r(a);var i=e("cad4"),n=e("4c06");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("a6e4");var s=e("828b"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"f38f08cc",null,!1,i["a"],void 0);a["default"]=r.exports},"8c9b":function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",[12==t.pageId||7==t.pageId?e("v-uni-view",{staticClass:"headerBox"},[e("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.tiaoyong("模板")}}},[e("v-uni-text",{staticClass:"moban"},[t._v("调用模板")])],1),e("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.tiaoyong("记录")}}},[e("v-uni-text",{staticClass:"moban"},[t._v("调用记录")])],1)],1):t._e()],1)},n=[]},a6e4:function(t,a,e){"use strict";var i=e("0166"),n=e.n(i);n.a},bbeb:function(t,a,e){var i=e("c86c");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */span[data-v-f38f08cc]::before{content:"*";position:absolute;font-size:%?32?%;top:%?33?%;left:%?10?%;color:red}.vaitemdate span[data-v-f38f08cc]::before{top:%?25?%}uni-page-body[data-v-f38f08cc]{background:#f8f7f6}body.?%PAGE?%[data-v-f38f08cc]{background:#f8f7f6}.shangbaojilv[data-v-f38f08cc]{font-size:15px;padding:0 15px;color:#fff;background:#1c77dc;min-width:80px;height:30px;line-height:30px;-webkit-border-radius:4px;border-radius:4px;text-align:center}.form-title[data-v-f38f08cc]{font-size:%?32?%;display:flex;justify-content:space-between;padding:%?30?%;background:#eee}.btn-list[data-v-f38f08cc]{background-color:#eee;position:fixed;bottom:0;width:100%}.form-title .title-right[data-v-f38f08cc]{color:#888;font-size:%?28?%}.formtitle[data-v-f38f08cc]{background-color:#fff;font-size:%?36?%;padding:%?14?% %?14?% 0 %?16?%;display:flex;justify-content:space-between;width:100%;height:%?80?%}.select-types[data-v-f38f08cc]{width:100%;height:100%;background:#f3f2f0;position:fixed;left:0;top:0;z-index:100}.select-types .item[data-v-f38f08cc]{width:100%;height:%?100?%;line-height:%?100?%;padding-left:%?30?%;border-bottom:%?1?% solid #e6e6e6;background:#fff;font-size:%?32?%;color:#1a1a1a}.select-types .item.active[data-v-f38f08cc]{background:#dbdbdb}.task-add-container[data-v-f38f08cc]{z-index:4;position:fixed;top:%?80?%;bottom:%?0?%;width:100%;left:%?0?%;right:%?0?%;overflow-y:scroll;padding-bottom:%?120?%}.task-add-container .box[data-v-f38f08cc]{background:#fff;width:100%;height:auto;border-bottom:%?24?% solid #eee;border-radius:%?10?%}.task-add-container .box .title[data-v-f38f08cc]{width:100%;height:%?100?%;background:#f8f7f6;display:flex;justify-content:center;align-items:center}.task-add-container .box .item[data-v-f38f08cc]{border-top:%?1?% solid #ccc;position:relative}.rate-tag[data-v-f38f08cc]{margin:3px;padding:3px 3px 6px 4px;display:inline-block;background:#eee;border:1px solid #e8d4d4;width:40px;height:30px;border-radius:4px;text-align:center;cursor:pointer}.select-tag-1[data-v-f38f08cc]{background:red}.select-tag-2[data-v-f38f08cc]{background:#5fd7fb}.select-tag-3[data-v-f38f08cc]{background:#09ff00}.select-tag-4[data-v-f38f08cc]{background:#ffcf00}',""]),t.exports=a},bcf3:function(t,a,e){var i=e("0cd0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("967d").default;n("285da583",i,!0,{sourceMap:!1,shadowMode:!1})},cad4:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return i}));var i={uTabs:e("6245").default,uCollapse:e("f040").default,uCollapseItem:e("7e2a").default,uIcon:e("0d1c").default,uModal:e("cf82").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{},[e("u-tabs",{attrs:{list:t.tabL,"active-item-style":{fontSize:"16px !important",fontWight:900},"is-scroll":!1,current:t.tabIndex},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.change.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"task-add-container"},[e("formHeader",{attrs:{pageId:t.pageId}}),t.baseflag?e("v-uni-view",{staticStyle:{"text-align":"center","margin-top":"200upx","font-size":"38upx"}},[t._v("暂无该任务表单")]):t._e(),t._l(t.forms,(function(a,i){return[e("u-collapse",{key:i+"_0",on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.change.apply(void 0,arguments)},close:function(a){arguments[0]=a=t.$handleEvent(a),t.close.apply(void 0,arguments)},open:function(a){arguments[0]=a=t.$handleEvent(a),t.open.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"box"},[e("u-collapse-item",{attrs:{title:a.title,open:i==t.forms.length-1}},[e("v-uni-view",{staticStyle:{display:"flex","padding-left":"30rpx","align-items":"center","justify-content":"space-between","border-top":"1px solid #eee"}},[a.readonly?e("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(a.send_user_name)+" "+t._s(a.send_time)),e("img",{staticStyle:{height:"80rpx",width:"auto"},attrs:{src:a.sign}})]):t._e(),a.readonly?e("v-uni-view",[t._v("接收人 "+t._s(a.recv_user_name))]):t._e()],1),t._l(a.inputs,(function(i,n){return["input"==i.type&&""!=i.title?e("v-uni-view",{key:n+"_0",staticClass:"item",staticStyle:{display:"flex","align-items":"center"}},[e("v-input",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"label"==i.type?e("v-uni-view",{key:n+"_1",staticClass:"item",staticStyle:{display:"flex","align-items":"center"}},[e("v-label",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"select"==i.type?e("v-uni-view",{key:n+"_2",staticClass:"item"},[e("v-select",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"switch"==i.type?e("v-uni-view",{key:n+"_3",staticClass:"item sub-item"},[e("v-switch",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"radio"==i.type?e("v-uni-view",{key:n+"_4",staticClass:"item"},[e("v-radio",{attrs:{gruop:"field",formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"checkbox"==i.type?e("v-uni-view",{key:n+"_5",staticClass:"item"},[e("v-select",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"inputselect"==i.type&&void 0!=i.props&&"map"!=i.props.source?e("v-uni-view",{key:n+"_6",staticClass:"item"},[e("v-inputselect",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"inputselect"==i.type&&void 0!=i.props&&"map"==i.props.source?e("v-uni-view",{key:n+"_7",staticClass:"item"},[e("v-map",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"datetime"==i.type||"date"==i.type?e("v-uni-view",{key:n+"_8",staticClass:"item"},[e("v-date-time",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"textarea"==i.type?e("v-uni-view",{key:n+"_9",staticClass:"item"},[e("v-textarea",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"upload"==i.type?e("v-uni-view",{key:n+"_10",staticClass:"item"},[e("v-upload",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"canvas"==i.type?e("v-uni-view",{key:n+"_11",staticClass:"item"},[e("v-canvas",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"treeselect"==i.type?e("v-uni-view",{key:n+"_12",staticClass:"item"},[e("v-select",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"cascader"==i.type?e("v-uni-view",{key:n+"_13",staticClass:"item"},[e("v-cascader",{attrs:{formid:a.formid,item:i,index:n},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"dynamic"==i.type?e("v-uni-view",{key:n+"_14",staticClass:"item"},[e("v-task-add-group",{attrs:{readonly:void 0!=a.readonly&&a.readonly,should_append:a.append,item:i.row,headtitle:i.title,formid:a.formid,field:i.field,target_title:i.target_title,action:Number(a.action),target:i.target},on:{"trigger-del":function(a){arguments[0]=a=t.$handleEvent(a),t.trigger_del.apply(void 0,arguments)},trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.trigger.apply(void 0,arguments)}}})],1):t._e(),n==a.inputs.length-1?e("v-uni-view",{key:n+"_15"},[a.readonly&&a.sign?e("v-uni-view",{staticClass:"item"},[e("v-uni-view",{staticStyle:{display:"flex","font-size":"30upx",color:"#303133",padding:"13px 0"}},[e("v-uni-view",{staticStyle:{"margin-left":"30upx",opacity:".8","min-width":"170upx",height:"108upx","line-height":"108upx"}},[t._v("责任人签名：")]),e("v-uni-view",{staticStyle:{display:"flex","flex-direction":"row"}},[e("v-uni-view",{},[e("v-uni-image",{staticStyle:{"border-radius":"10upx",width:"200upx",display:"inline-block","margin-top":"10upx","max-height":"350upx"},attrs:{src:t.imgUrl+a.sign,mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.imgview(a.sign)}}})],1)],1)],1)],1):t._e()],1):t._e(),"static"==i.type?e("v-uni-view",{key:n+"_16",staticClass:"item btn-list"},[t.sign&&!a.readonly?e("v-uni-view",{staticClass:"item",staticStyle:{padding:"20upx 20upx",display:"flex","align-items":"center",height:"auto",background:"white","border-bottom":"1rpx solid #ccc"},style:{justifyContent:"space-between"}},[e("v-uni-view",{staticStyle:{display:"flex"}},[e("v-uni-text",{staticStyle:{"font-size":"32upx",color:"#666","margin-right":"50upx",height:"100upx","line-height":"100upx"}},[t._v("责任人签名:")]),t.canvasImgUrl?e("v-uni-view",{staticStyle:{"border-radius":"10upx","text-align":"center"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.imgview(t.canvasImgUrl)}}},[e("img",{staticStyle:{width:"200upx",height:"auto"},attrs:{src:t.imgUrl+t.canvasImgUrl}})]):t._e()],1),e("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.canvasImg()}}},[e("u-icon",{attrs:{name:"arrow-right",color:"#999",size:"32"}})],1)],1):t._e(),e("v-btn-group",{attrs:{formid:a.formid,item:i.row},on:{trigger:function(a){arguments[0]=a=t.$handleEvent(a),t.button_trigger.apply(void 0,arguments)}}})],1):t._e()]}))],2)],1)],1)]})),e("u-modal",{attrs:{title:"发现填写记录!",closeOnClickOverlay:!1,confirmText:"使用",cancelText:"放弃",showCancelButton:!0},on:{confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.useDraft.apply(void 0,arguments)},cancel:function(a){arguments[0]=a=t.$handleEvent(a),t.giveupDraft.apply(void 0,arguments)}},model:{value:t.draftFlag,callback:function(a){t.draftFlag=a},expression:"draftFlag"}},[e("v-uni-view",{staticStyle:{display:"flex",padding:"10upx 20upx"}},[e("v-uni-view",{staticStyle:{height:"120upx","line-height":"60upx","text-indent":"30upx"}},[t._v("可以继续填写或放弃重新开始填写")])],1)],1),t.showRatePop?e("v-popup",{attrs:{title:"测试弹出"},on:{"on-select-ok":function(a){arguments[0]=a=t.$handleEvent(a),t.hasChooseRate.apply(void 0,arguments)}}},[e("v-uni-view",{attrs:{slot:"content"},slot:"content"},t._l(t.rateList,(function(a,i){return e("v-uni-view",{key:i,class:a.class,attrs:{"data-id":a.value},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseRate.apply(void 0,arguments)}}},[t._v(t._s(a.name))])})),1)],1):t._e(),e("u-modal",{attrs:{title:"设置模板名称",closeOnClickOverlay:!1,confirmText:"确认",cancelText:"取消",showCancelButton:!0},on:{confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.taskaccept.apply(void 0,arguments)},cancel:function(a){arguments[0]=a=t.$handleEvent(a),t.tasklook.apply(void 0,arguments)}},model:{value:t.templateflag,callback:function(a){t.templateflag=a},expression:"templateflag"}},[e("v-uni-view",{staticStyle:{display:"flex",padding:"10upx 20upx"}},[e("v-uni-view",{staticStyle:{height:"80upx","line-height":"80upx"}},[t._v("模板名称：")]),e("v-uni-input",{staticClass:"font24 color-666",staticStyle:{"line-height":"80rpx",height:"80rpx"},attrs:{clear:!0,"cursor-spacing":"140",placeholder:"请输入"},model:{value:t.templatename,callback:function(a){t.templatename=a},expression:"templatename"}})],1)],1),t.canvasflag?e("v-uni-view",{staticStyle:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0","z-index":"999"}},[e("Canvasname",{on:{childtofatherimg:function(a){arguments[0]=a=t.$handleEvent(a),t.fatherimg.apply(void 0,arguments)}}})],1):t._e(),t.flagimg?e("v-uni-view",{staticStyle:{"z-index":"100",position:"fixed",top:"0",left:"0",width:"100%",height:"100%","background-color":"#000000"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.closeImage.apply(void 0,arguments)}}},[e("v-uni-view",{staticStyle:{width:"100%",height:"100%",display:"flex","justify-content":"center","align-items":"center"}},[e("img",{staticStyle:{width:"100%",margin:"auto"},attrs:{src:t.canimg,mode:"aspectFill"}})])],1):t._e()],2)],1)},o=[]},f989:function(t,a,e){"use strict";e.r(a);var i=e("8c9b"),n=e("40374");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("31fc");var s=e("828b"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"60e86bfc",null,!1,i["a"],void 0);a["default"]=r.exports}}]);