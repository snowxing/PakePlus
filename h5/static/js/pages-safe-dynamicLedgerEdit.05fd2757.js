(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-safe-dynamicLedgerEdit"],{"0aeb":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("9b1b"));a("bf0f"),a("2797"),a("aa77"),a("aa9c"),a("d4b5"),a("5ef2"),a("4100"),a("dd2b"),a("64aa");var o=a("4241"),r=a("1575"),s=a("6e31"),d=getApp({allowDefault:!0}),l={data:function(){return{tabL:[{name:"详情"}],formsList:[],request_obj:{},draftFlag:!1,tabIndex:0,viewtask:!1,canvasImgUrl:"",canvasflag:!1,templateobj:{},imgUrl:getApp({allowDefault:!0}).globalData.imgUrl,sign:"",title:"",typeIndex:1,tid:0,hid:0,rid:0,nid:0,fid:0,typesShow:!0,forms:[],submitObj:{},app_id:0,trans_id:0,task_id:0,form_id:0,param:"",is_time_limit:0,source_user:[],title_config:{4:"input_1",2:"input_1",7:"",6:"input_1",8:"input_2",9:"input_1",5:"input_2",3:"input_2",10:"",11:"",12:"input_1",14:"",15:"input_1"},showRatePop:!1,rateList:[{value:1,selected:!1,name:"差",class:"rate-tag"},{value:2,selected:!1,name:"中",class:"rate-tag"},{value:3,selected:!0,name:"良",class:"rate-tag .select-tag-3"},{value:4,selected:!1,name:"优",class:"rate-tag"}],cacheKey:"",lastRowIndex:0,pageId:"",responseRes:null}},components:{},props:["app","task"],computed:{},onLoad:function(t){this.tabL[0].name=t.header?t.header:"详情",this.request_obj=JSON.parse(t.item),console.log("request_obj",this.request_obj)},mounted:function(){var t=this;if(this.app){var e={app_id:this.app,task_id:this.task};this.loadTask(e),this.loadTitle(e)}o.api.gethealthedit({cat_id:this.request_obj.cat_id,page:1,page_size:20,id:this.request_obj._id.$id},(function(e){t.formsList=e.data.forms,console.log("success",t.formsList)}))},methods:{canvasImg:function(){this.canvasflag=!0},change:function(){},fatherimg:function(t){var e=this;this.canvasflag=!1;var a={base64_file:t};o.api.uploader_image(a,(function(t){e.canvasImgUrl=t.data.url}),(function(t){console.log(t)}))},imgview:function(t){this.canimg=this.imgUrl+t},shangbao:function(t){uni.navigateTo({url:"/pages1/meInfo/yinhuan"})},loadTitle:function(t){},loadTask:function(t){var e=0,a=0;if(this.tid=0,this.hid=0,this.rid=0,this.nid=0,t.fid&&(this.fid=t.fid),d.globalData.param=t.param,d.globalData.relation=[],d.globalData.form_data={},d.globalData.form_cache={},d.globalData.limit_department={},d.globalData.area_limit={},d.globalData.risk_limit={category_id:0,category_field:{}},this.pageId=t.app_id?t.app_id:"",0==t.task_id){this.setData({hid:void 0===t.hid?0:t.hid,tid:void 0===t.tid?0:t.tid,rid:void 0===t.rid?0:t.rid,nid:void 0===t.nid?0:t.nid,fid:void 0===t.fid?0:t.fid}),e=this.app?this.app:t.app_id;var i=t.param;a=0,this.param=i,this.setData({app_id:e,task_id:a,param:i}),o.api.get_app_list({_cache:!0},(function(e){e.data.forEach((function(e){e.app_list.forEach((function(e){t.app_id==e.id&&uni.setNavigationBarTitle({title:e.name})}))}))})),this.launchTask(),d.globalData.task_type=1}else{e=0,a=this.task?this.task:t.task_id;var n=t.param,r=t.trans_id;this.param=n,this.setData({app_id:e,task_id:a,trans_id:r,param:n}),this.openTask()}},openTask:function(){var t=this;uni.showLoading({title:"加载中",mask:!0}),o.api.task_get_data({task_id:this.task_id,transid:this.trans_id},(function(e){uni.hideLoading(),t.app_id=e.data.app_id,t.task_id=e.data.taskid;var a=[];t.sign=e.data.sign,e.data.forms.length>=1&&(e.data.forms[0].send_uid==getApp().globalData.user.userid?d.globalData.task_type=1:d.globalData.task_type=0);for(var i=function(t){var i=e.data.forms[t].formid;void 0!=a.find((function(t){return t==i}))&&(e.data.forms[t].formid=e.data.forms[t].formid+t),a.push(e.data.forms[t].formid)},n=e.data.forms.length-1;n>=0;n--)i(n);t.setData({task_id:e.data.taskid,forms:e.data.forms,source_user:e.data.source_user,title:e.data.forms[e.data.forms.length-1].title}),t.setData({form_id:e.data.forms[e.data.forms.length-1].formid}),t.setData({is_time_limit:e.data.forms[e.data.forms.length-1].is_time_limit})}))},launchTask:function(){var t=this;uni.setStorageSync("condidateIsadmin",""),d.globalData.currentTaskPage=1,uni.showLoading({title:"加载中",mask:!0}),this.viewtask?o.api.event_get({transid:this.tid},(function(e){uni.setStorageSync("condidateIsadmin",e.data.isadmin),uni.hideLoading(),t.app_id=e.data.app_id,t.task_id=e.data.taskid,t.sign=e.data.sign,t.setData({forms:e.data.forms,source_user:e.data.source_user,title:e.data.forms[e.data.forms.length-1].title}),t.setData({form_id:e.data.forms[e.data.forms.length-1].formid}),t.setData({is_time_limit:e.data.forms[e.data.forms.length-1].is_time_limit}),t.draftFlag=s.tool.hasFindCache(e.data.forms[e.data.forms.length-1].formid)})):o.api.process_start_data({app_id:this.app_id,tid:this.tid,hid:this.hid,rid:this.rid,nid:this.nid,param:this.param,fid:this.fid},(function(e){uni.setStorageSync("condidateIsadmin",e.data.isadmin),uni.hideLoading(),t.app_id=e.data.app_id,"11"==t.app_id&&1==t.dep&&e.data.forms[0].inputs[1].row[0].pop(),t.sign=e.data.sign,t.responseRes=e,t.draftFlag=s.tool.hasFindCache(e.data.forms[e.data.forms.length-1].formid),t.draftFlag||t.giveupDraft()}))},useDraft:function(){var t=this.responseRes;this.forms=t.data.forms,this.freshFormValue(t.data.forms[t.data.forms.length-1]),this.setData({task_id:t.data.taskid,forms:t.data.forms,source_user:t.data.source_user,title:t.data.forms[t.data.forms.length-1].title}),this.setData({form_id:t.data.forms[t.data.forms.length-1].formid,is_time_limit:t.data.forms[t.data.forms.length-1].is_time_limit}),this.setData({forms:t.data.forms})},giveupDraft:function(){var t=this.responseRes;this.forms=t.data.forms,s.tool.clearFormCache(this.forms[this.forms.length-1].formid),this.setData({task_id:t.data.taskid,forms:t.data.forms,source_user:t.data.source_user,title:t.data.forms[t.data.forms.length-1].title}),this.setData({form_id:t.data.forms[t.data.forms.length-1].formid,is_time_limit:t.data.forms[t.data.forms.length-1].is_time_limit}),this.setData({forms:t.data.forms})},freshFormValue:function(t){var e=this;t.append=!1,t.inputs.forEach((function(a){if("dynamic"===a.type)(function(){var i=a.field,n=s.tool.getCacheFormData(t.formid,a.field);if(void 0!=n){var o=[];t.append=!0;var r=function(t){var e=n["data"][t],i=JSON.parse(JSON.stringify(a.row[0]));i.forEach((function(t){var a=e[t.field];void 0!=a&&("treeselect"==t.type?a.length>0&&(t.options.push({value:a[0].id,label:a[0].title}),t.value=a[0].id):t.value=a)})),o.push(i)};for(var d in n["data"])r(d);a.row=o,s.tool.removeFormData(t.formid,a.field,-1)}var l=function(t){a.row[t].forEach((function(a){0==a.value.length&&"switch"==a.type&&(a.value=a.props.falseValue),e.freshFormNode(i+"|"+a.field,a.value,void 0==a.options?null:a.options,t)}))};for(var c in a.row)l(c)})();else if("static"==a.type);else{var i=s.tool.getCacheFormData(t.formid,a.field);if(i instanceof Array){if(i&&void 0!=i&&i.length>0){for(var n=[],o=[],r=0;r<i.length;r++)o.push({value:i[r].id,label:i[r].title}),i[r].id?n.push(i[r].id):n.push(i[r]);-1!=a.field.indexOf("treeselect")&&(a.options=o),a.value=n}}else void 0!=i&&(a.value=i);e.freshFormNode(a.field,a.value,void 0==a.options?null:a.options,-1)}}))},freshFormNode:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,n=t;i>=0&&(n+="|"+i);var o=[];e instanceof Array&&null!=a?e.forEach((function(t){a.forEach((function(e){e.value==t&&o.push({id:e.value,title:e.label})}))})):o=e;var r={detail:{field:n,value:o}};this.trigger(r)},trigger_del:function(t){var e=t.detail.value,a=t.detail.field,i=Object.assign({},this.submitObj);if(void 0!=i[a])for(var n in i[a])i[a][n].sort==e&&i[a].splice(n,1);s.tool.removeFormData(t.detail.formid,t.detail.field,t.detail.value),this.setData({submitObj:i})},trigger:function(t){var e=t.detail.field;if(void 0!=e&&0!=e.length){t.detail.auto;var a=Object.assign({},this.submitObj),i=e.split("|"),n=getApp({allowDefault:!0});if(void 0==n.globalData.form_data&&(n.globalData.form_data={}),n.globalData.form_data.nid=this.nid,3==i.length){e=i[0];var o=i[1],r=i[2],s=[];if(t.detail.value instanceof Array?"upload"==t.detail.type?s=t.detail.value:t.detail.value.forEach((function(t){t instanceof Object?s.push({value:t.id,label:t.title}):s.push(t)})):(s=null,4==t.detail.formid&&(0==r&&"date_8"==i[1]?getApp({allowDefault:!0}).globalData.fireEvent("change-date",{field:"date_10",value:t.detail.value}):"date_9"==i[1]&&r>=this.lastRowIndex&&(getApp({allowDefault:!0}).globalData.fireEvent("change-date",{field:"date_11",value:t.detail.value}),this.setData({lastRowIndex:r})))),void 0==a[e]){var d={};d[o]=null==s?t.detail.value:s,d["sort"]=r,a[e]=[d]}else{var l=!1,c=a[e];for(var u in c)if(c[u].sort==r){c[u][o]=null===s?t.detail.value:s,l=!0;break}if(!l){var f={};f[o]=null===s?t.detail.value:s,f["sort"]=r,a[e].push(f)}}}else{var p=[];t.detail.value instanceof Array?"upload"==t.detail.type||"casader"==t.detail.type||"basket"==t.detail.type?p=t.detail.value:void 0==t.detail.type?p=t.detail.value.join(","):t.detail.value.forEach((function(t){p.push({value:t.id,label:t.title})})):p=null,a[e]=null===p?t.detail.value:p}this.setData({submitObj:a}),n.globalData.submitObj=a}},getTitle:function(){var t=this.title_config[String(this.app_id)];return void 0==t?this.title:t.length>0&&void 0!==this.submitObj[t]?this.submitObj[t]:this.title+s.tool.getCurrentTime()},button_trigger:function(t){var e=this;if(110!=t.detail.value||void 0!=t.detail.confirm||void 0!=t.type)if(t.detail.value>2e4&&void 0==t.type){var a=t.detail.value-2e4;r.wxapi.openUrl("/pages/task/form?task_id=0&app_id="+a+"&param=launch|"+this.trans_id)}else{var i=this.submitObj;i["form_id"]=this.form_id,i["is_time_limit"]=this.is_time_limit;var n=this.forms[this.forms.length-1].tplid,l={action:t.detail.value,app_id:this.app_id,tplid:n,nid:this.nid,fid:this.fid?this.fid:"",param:this.param,candidate:{},forms_data:JSON.stringify([i]),task_id:this.task_id,title:this.getTitle(),deadline_time:s.tool.getNowDate(),notice:[],sign:this.canvasImgUrl};d.globalData.formData=l,l.candidate=JSON.stringify(l.candidate),l.notice=JSON.stringify(l.notice),98!=t.detail.value?"zc"!=t.detail.type?"jz"!=t.detail.type?(uni.showLoading({title:"正在提交，请稍后",mask:!0}),o.api.process_launch(l,(function(a){if(uni.hideLoading(),202==a.code){var i={};a.data[0].candidate.length>0?i[String(a.data[0].node_id)]=a.data[0].candidate:(i[String(a.data[0].node_id)]=[],void 0!=e.source_user&&100!=t.detail.value&&e.source_user.forEach((function(t){i[String(a.data[0].node_id)].push({uid:t.id,name:t.name})}))),d.globalData.formData.candidate=i,d.globalData.lstCacheKey=e.cacheKey,r.wxapi.openUrl("/pages/task/candidate")}else if(203==a.code||200==a.code)if(s.tool.clearFormData(e.cacheKey),203==a.code){if(a.data.jump){var n=a.data.jump,o="/pages/task/form?task_id=0&tid=0&hid=0&rid=0&fid=0&app_id="+n.app_id+"&nid="+n.nid+"&param="+n.param;return console.log(n,"20311",o),void r.wxapi.openUrl(o)}"85"==a.data.node_id||""==a.data.node_id?r.wxapi.openUrl("/pages/home/homeapp",2):r.wxapi.openUrl("/pages/task/form?app_id=0&trans_id="+a.data.transid)}else r.wxapi.openUrl("/pages/task/listapp?type="+d.globalData.task_type,2);else if(206==a.code){s.tool.clearFormData(e.cacheKey);var l=getCurrentPages()[getCurrentPages().length-1];l.onLoad(l.options)}else 207==a.code?(s.tool.clearFormData(e.cacheKey),s.tool.info("模板已成功保存")):204==a.code&&(s.tool.clearFormData(e.cacheKey),e.setData({showRatePop:!0}))}))):13==this.forms[0].formid?uni.navigateTo({url:"/pages/safe/teshuwork?tabindex=1"}):uni.navigateTo({url:"/secure/threepage/renwumoban?formid="+this.forms[0].formid}):this.templateobj=l:r.wxapi.openUrl("/pages/task/time-send")}else uni.showModal({title:"提示",content:"请确认是否撤回任务",success:function(a){a.confirm&&(t.detail.confirm=!0,e.button_trigger(t))}})},hasChooseRate:function(t){if(this.setData({showRatePop:!1}),t.detail.value){var e=this.rateList,a=3;e.forEach((function(t){t.selected&&(a=t.value)})),o.api.rate_commit({value:a,transid:this.trans_id},(function(t){s.tool.info("评价已成功提交"),r.wxapi.openUrl("/pages/task/list?type="+d.globalData.task_type,2)}))}},chooseRate:function(t){var e=t.currentTarget.dataset.id,a=this.rateList;a.forEach((function(t){Number(t.value)==Number(e)?(t.selected=!0,t.class="rate-tag  select-tag-"+e):(t.class="rate-tag",t.selected=!1)})),this.setData({rateList:a})},submit:function(){console.log(this.formsList,"==formsList==",this.submitObj,"==request_obj==",this.request_obj);var t=(0,n.default)((0,n.default)({},this.submitObj),{},{category_id:this.request_obj.category_id,staff_name:this.request_obj.staff_name,created_at:this.request_obj.created_at,updated_at:this.request_obj.updated_at,owner_id:this.request_obj.owner_id,etp_id:this.request_obj.etp_id,is_del:this.request_obj.is_del,created_uid:this.request_obj.created_uid,_id:this.request_obj._id.$id});console.log("req_obj",t),o.api.gas_form_data_edit(t,(function(t){console.log("submit success",t),uni.showModal({title:"提示",showCancel:!0,content:"您的数据已成功提交，返回上一步吗？",success:function(t){console.log("query",t),!0===t.confirm&&uni.navigateBack()}})}))}}};e.default=l},"0af4":function(t,e,a){var i=a("7be3");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("62bedfd9",i,!0,{sourceMap:!1,shadowMode:!1})},6245:function(t,e,a){"use strict";a.r(e);var i=a("9737"),n=a("bdc4");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("c8e8");var r=a("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"57b412a3",null,!1,i["a"],void 0);e["default"]=s.exports},"7be3":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */span[data-v-72f24463]::before{content:"*";position:absolute;font-size:%?32?%;top:%?33?%;left:%?10?%;color:red}.vaitemdate span[data-v-72f24463]::before{top:%?25?%}uni-page-body[data-v-72f24463]{background:#f8f7f6}body.?%PAGE?%[data-v-72f24463]{background:#f8f7f6}.shangbaojilv[data-v-72f24463]{font-size:15px;padding:0 15px;color:#fff;background:#1c77dc;min-width:80px;height:30px;line-height:30px;-webkit-border-radius:4px;border-radius:4px;text-align:center}.form-title[data-v-72f24463]{font-size:%?32?%;display:flex;justify-content:space-between;padding:%?30?%;background:#eee}.btn-list[data-v-72f24463]{background-color:#eee;position:fixed;bottom:0;width:100%}.form-title .title-right[data-v-72f24463]{color:#888;font-size:%?28?%}.formtitle[data-v-72f24463]{background-color:#fff;font-size:%?36?%;padding:%?14?% %?14?% 0 %?16?%;display:flex;justify-content:space-between;width:100%;height:%?80?%}.select-types[data-v-72f24463]{width:100%;height:100%;background:#f3f2f0;position:fixed;left:0;top:0;z-index:100}.select-types .item[data-v-72f24463]{width:100%;height:%?100?%;line-height:%?100?%;padding-left:%?30?%;border-bottom:%?1?% solid #e6e6e6;background:#fff;font-size:%?32?%;color:#1a1a1a}.select-types .item.active[data-v-72f24463]{background:#dbdbdb}.task-add-container[data-v-72f24463]{z-index:4;position:fixed;top:%?80?%;bottom:%?0?%;width:100%;left:%?0?%;right:%?0?%;overflow-y:scroll;padding-bottom:%?120?%}.task-add-container .box[data-v-72f24463]{background:#fff;width:100%;height:auto;border-bottom:%?24?% solid #eee;border-radius:%?10?%}.task-add-container .box .title[data-v-72f24463]{width:100%;height:%?100?%;background:#f8f7f6;display:flex;justify-content:center;align-items:center}.task-add-container .box .item[data-v-72f24463]{border-top:%?1?% solid #ccc;position:relative}.rate-tag[data-v-72f24463]{margin:3px;padding:3px 3px 6px 4px;display:inline-block;background:#eee;border:1px solid #e8d4d4;width:40px;height:30px;border-radius:4px;text-align:center;cursor:pointer}.select-tag-1[data-v-72f24463]{background:red}.select-tag-2[data-v-72f24463]{background:#5fd7fb}.select-tag-3[data-v-72f24463]{background:#09ff00}.select-tag-4[data-v-72f24463]{background:#ffcf00}',""]),t.exports=e},"81d5":function(t,e,a){var i=a("a417");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("0c8aa72d",i,!0,{sourceMap:!1,shadowMode:!1})},"89c2":function(t,e,a){"use strict";a.r(e);var i=a("f035"),n=a("9de1");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("c8bf");var r=a("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"72f24463",null,!1,i["a"],void 0);e["default"]=s.exports},"8c1a":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("2634")),o=i(a("2fdc"));a("64aa"),a("5c47");var r=a("1575"),s={name:"u-tabs",props:{isScroll:{type:Boolean,default:!0},list:{type:Array,default:function(){return[]}},current:{type:[Number,String],default:0},height:{type:[String,Number],default:80},fontSize:{type:[String,Number],default:30},duration:{type:[String,Number],default:.5},activeColor:{type:String,default:"#aaff7f"},inactiveColor:{type:String,default:"#FFF"},barWidth:{type:[String,Number],default:40},barHeight:{type:[String,Number],default:6},gutter:{type:[String,Number],default:30},bgColor:{type:String,default:"#032e6d"},name:{type:String,default:"name"},count:{type:String,default:"count"},offset:{type:Array,default:function(){return[5,20]}},bold:{type:Boolean,default:!0},activeItemStyle:{type:Object,default:function(){return{}}},showLeftIcon:{type:Boolean,default:!0},showBar:{type:Boolean,default:!0},barStyle:{type:Object,default:function(){return{}}},itemWidth:{type:[Number,String],default:"auto"}},data:function(){return{scrollLeft:0,tabQueryInfo:[],componentWidth:0,scrollBarLeft:0,parentLeft:0,id:this.$u.guid(),currentIndex:this.current,barFirstTimeMove:!0}},watch:{list:function(t,e){var a=this;console.log("111111111111111111"),t.length!==e.length&&(this.currentIndex=0),this.$nextTick((function(){a.init()}))},current:{immediate:!0,handler:function(t,e){var a=this;this.$nextTick((function(){a.currentIndex=t,a.scrollByIndex()}))}}},computed:{tabBarStyle:function(){var t={width:this.barWidth+"rpx",transform:"translate(".concat(this.scrollBarLeft,"px, -100%)"),"transition-duration":"".concat(this.barFirstTimeMove?0:this.duration,"s"),"background-color":this.activeColor,height:this.barHeight+"rpx","border-radius":"".concat(this.barHeight/2,"px")};return Object.assign(t,this.barStyle),t},tabItemStyle:function(){var t=this;return function(e){var a={height:t.height+"rpx","line-height":t.height+"rpx","font-size":t.fontSize+"rpx","transition-duration":"".concat(t.duration,"s"),padding:t.isScroll?"0 ".concat(t.gutter,"rpx"):"",flex:t.isScroll?"auto":"1",width:t.$u.addUnit(t.itemWidth)};return e==t.currentIndex&&t.bold&&(a.fontWeight="bold"),e==t.currentIndex?(a.color=t.activeColor,a=Object.assign(a,t.activeItemStyle)):a.color=t.inactiveColor,a["padding-bottom"]="1px",a}}},methods:{init:function(){var t=this;return(0,o.default)((0,n.default)().mark((function e(){var a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$uGetRect("#"+t.id);case 2:a=e.sent,t.parentLeft=a.left,t.componentWidth=a.width,t.getTabRect();case 6:case"end":return e.stop()}}),e)})))()},goHome:function(){r.wxapi.openUrl("/pages/home/home",2),console.log("go/home")},goBack:function(){window.history.go(-1)},clickTab:function(t,e){e!=this.currentIndex&&(this.$emit("change",e),this.$emit("cuur",t))},getTabRect:function(){for(var t=uni.createSelectorQuery().in(this),e=0;e<this.list.length;e++)t.select("#u-tab-item-".concat(e)).fields({size:!0,rect:!0});t.exec(function(t){this.tabQueryInfo=t,this.scrollByIndex()}.bind(this))},scrollByIndex:function(){var t=this,e=this.tabQueryInfo[this.currentIndex];if(e){var a=e.width,i=e.left-this.parentLeft,n=i-(this.componentWidth-a)/2;this.scrollLeft=n<0?0:n;var o=e.left+e.width/2-this.parentLeft;this.scrollBarLeft=o-uni.upx2px(this.barWidth)/2,1==this.barFirstTimeMove&&setTimeout((function(){t.barFirstTimeMove=!1}),100)}}},mounted:function(){this.init(),this.$emit("cuur",this.list[0])}};e.default=s},9737:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniIcons:a("49c5").default,uBadge:a("c01b").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"u-tabs",style:{background:t.bgColor}},[a("v-uni-view",{staticStyle:{display:"flex",width:"100%"}},[a("v-uni-view",{staticStyle:{color:"white",padding:"20rpx",width:"100rpx"}},[t.showLeftIcon?a("uni-icons",{attrs:{type:"left",size:"24",color:"white"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}}):t._e()],1),a("v-uni-view",{staticStyle:{width:"calc(100% - 200rpx)"},attrs:{id:t.id}},[a("v-uni-scroll-view",{staticClass:"u-scroll-view",attrs:{"scroll-x":!0,"scroll-left":t.scrollLeft,"scroll-with-animation":!0}},[a("v-uni-view",{staticClass:"u-scroll-box",class:{"u-tabs-scorll-flex":!t.isScroll}},[t._l(t.list,(function(e,i){return a("v-uni-view",{key:i,staticClass:"u-tab-item u-line-1",style:[t.tabItemStyle(i)],attrs:{id:"u-tab-item-"+i},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clickTab(e,i)}}},[a("u-badge",{attrs:{count:e[t.count]||e["count"]||0,offset:t.offset,size:"mini"}}),t._v(t._s(e[t.name]||e["name"]))],1)})),t.showBar?a("v-uni-view",{staticClass:"u-tab-bar",style:[t.tabBarStyle]}):t._e()],2)],1)],1),a("v-uni-view",{staticStyle:{color:"white",padding:"20rpx",width:"100rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goHome.apply(void 0,arguments)}}},[a("uni-icons",{attrs:{type:"home-filled",size:"24",color:"white"}})],1)],1)],1)},o=[]},"9de1":function(t,e,a){"use strict";a.r(e);var i=a("0aeb"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},a417:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-57b412a3],\r\nuni-scroll-view[data-v-57b412a3]{box-sizing:border-box}[data-v-57b412a3]::-webkit-scrollbar,[data-v-57b412a3]::-webkit-scrollbar,[data-v-57b412a3]::-webkit-scrollbar{display:none;width:0!important;height:0!important;-webkit-appearance:none;background:transparent}.u-scroll-box[data-v-57b412a3]{position:relative;background:#032e6d;padding-bottom:"2rpx"}uni-scroll-view[data-v-57b412a3]  ::-webkit-scrollbar{display:none;width:0!important;height:0!important;-webkit-appearance:none;background:transparent}.u-scroll-view[data-v-57b412a3]{width:100%;white-space:nowrap;position:relative}.u-tab-item[data-v-57b412a3]{position:relative;display:inline-block;text-align:center;transition-property:background-color,color}.u-tab-item .u-line-1[data-v-57b412a3]{background:#032e6d;color:#fff!important}.u-tab-bar[data-v-57b412a3]{position:absolute;bottom:0}.u-tabs-scorll-flex[data-v-57b412a3]{display:flex;flex-direction:row;justify-content:space-between}',""]),t.exports=e},bdc4:function(t,e,a){"use strict";a.r(e);var i=a("8c1a"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},c8bf:function(t,e,a){"use strict";var i=a("0af4"),n=a.n(i);n.a},c8e8:function(t,e,a){"use strict";var i=a("81d5"),n=a.n(i);n.a},f035:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uTabs:a("6245").default,uButton:a("f005").default,uModal:a("cf82").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{},[a("u-tabs",{attrs:{list:t.tabL,"active-item-style":{fontSize:"16px !important",fontWight:900},"is-scroll":!1,current:t.tabIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"task-add-container"},[a("v-uni-view",{staticClass:"box"},[t._l(t.formsList,(function(e,i){return["input"==e.type?a("v-uni-view",{key:i+"_0",staticClass:"item",staticStyle:{display:"flex","align-items":"center"}},[a("v-input",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"label"==e.type?a("v-uni-view",{key:i+"_1",staticClass:"item",staticStyle:{display:"flex","align-items":"center"}},[a("v-label",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"select"==e.type?a("v-uni-view",{key:i+"_2",staticClass:"item"},[a("v-select",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"switch"==e.type?a("v-uni-view",{key:i+"_3",staticClass:"item sub-item"},[a("v-switch",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"radio"==e.type?a("v-uni-view",{key:i+"_4",staticClass:"item"},[a("v-radio",{attrs:{gruop:"field",formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"checkbox"==e.type?a("v-uni-view",{key:i+"_5",staticClass:"item"},[a("v-select",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"inputselect"==e.type&&void 0!=e.props&&"map"!=e.props.source?a("v-uni-view",{key:i+"_6",staticClass:"item"},[a("v-inputselect",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"inputselect"==e.type&&void 0!=e.props&&"map"==e.props.source?a("v-uni-view",{key:i+"_7",staticClass:"item"},[a("v-map",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"map"==e.type?a("v-uni-view",{key:i+"_8",staticClass:"item"},[a("v-map",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"datetime"==e.type||"date"==e.type?a("v-uni-view",{key:i+"_9",staticClass:"item"},[a("v-date-time",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"datetime"==e.type||"date"==e.type||"datePicker"===e.type?a("v-uni-view",{key:i+"_10",staticClass:"item"},[a("v-date",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"textarea"==e.type?a("v-uni-view",{key:i+"_11",staticClass:"item"},[a("v-textarea",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"DictComponent"==e.type?a("v-uni-view",{key:i+"_12",staticClass:"item"},[a("v-dictComponent",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"upload"==e.type?a("v-uni-view",{key:i+"_13",staticClass:"item"},[a("v-upload",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"UploadComponent"===e.type?a("v-uni-view",{key:i+"_14",staticClass:"item"},[a("v-upload-component",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"canvas"==e.type?a("v-uni-view",{key:i+"_15",staticClass:"item"},[a("v-canvas",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"treeselect"==e.type?a("v-uni-view",{key:i+"_16",staticClass:"item"},[a("v-select",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"cascader"==e.type?a("v-uni-view",{key:i+"_17",staticClass:"item"},[a("v-cascader",{attrs:{formid:0,item:e,index:i},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"dynamic"==e.type?a("v-uni-view",{key:i+"_18",staticClass:"item"}):t._e(),"static"==e.type?a("v-uni-view",{key:i+"_19",staticClass:"item btn-list"},[a("v-btn-group",{attrs:{formid:0,item:e.row},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.button_trigger.apply(void 0,arguments)}}})],1):t._e()]})),t.formsList.length>0?a("v-uni-view",{staticClass:"t-center"},[a("u-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交")])],1):t._e()],2),a("u-modal",{attrs:{title:"发现填写记录!",closeOnClickOverlay:!1,confirmText:"使用",cancelText:"放弃",showCancelButton:!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.useDraft.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.giveupDraft.apply(void 0,arguments)}},model:{value:t.draftFlag,callback:function(e){t.draftFlag=e},expression:"draftFlag"}},[a("v-uni-view",{staticStyle:{display:"flex",padding:"10upx 20upx"}},[a("v-uni-view",{staticStyle:{height:"120upx","line-height":"60upx","text-indent":"30upx"}},[t._v("可以继续填写或放弃重新开始填写")])],1)],1),t.showRatePop?a("v-popup",{attrs:{title:"测试弹出"},on:{"on-select-ok":function(e){arguments[0]=e=t.$handleEvent(e),t.hasChooseRate.apply(void 0,arguments)}}},[a("v-uni-view",{attrs:{slot:"content"},slot:"content"},t._l(t.rateList,(function(e,i){return a("v-uni-view",{key:i,class:e.class,attrs:{"data-id":e.value},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseRate.apply(void 0,arguments)}}},[t._v(t._s(e.name))])})),1)],1):t._e(),t.canvasflag?a("v-uni-view",{staticStyle:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0","z-index":"999"}}):t._e()],1)],1)},o=[]}}]);