(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-task-addplan"],{"0c6e":function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.u-toast[data-v-36307caf]{position:fixed;z-index:-1;transition:opacity .3s;text-align:center;color:#fff;border-radius:%?8?%;background:#585858;display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:%?28?%;opacity:0;pointer-events:none;padding:%?18?% %?40?%}.u-toast.u-show[data-v-36307caf]{opacity:1}.u-icon[data-v-36307caf]{margin-right:%?10?%;display:flex;flex-direction:row;align-items:center;line-height:normal}.u-position-center[data-v-36307caf]{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);max-width:70%}.u-position-top[data-v-36307caf]{left:50%;top:20%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.u-position-bottom[data-v-36307caf]{left:50%;bottom:20%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.u-type-primary[data-v-36307caf]{color:#2979ff;background-color:#ecf5ff;border:1px solid #d7eafe}.u-type-success[data-v-36307caf]{color:#19be6b;background-color:#dbf1e1;border:1px solid #bef5c8}.u-type-error[data-v-36307caf]{color:#fa3534;background-color:#fef0f0;border:1px solid #fde2e2}.u-type-warning[data-v-36307caf]{color:#f90;background-color:#fdf6ec;border:1px solid #faecd8}.u-type-info[data-v-36307caf]{color:#909399;background-color:#f4f4f5;border:1px solid #ebeef5}.u-type-default[data-v-36307caf]{color:#fff;background-color:#585858}',""]),t.exports=e},2251:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d4b5"),i("c9b5"),i("bf0f"),i("ab80"),i("2797"),i("aa9c"),i("4100"),i("dd2b");var a=i("1575"),n=i("4241"),o=i("6e31"),r=(getApp({allowDefault:!0}),{data:function(){return{show:!1,disabled:!1,recordType:[{value:1,label:"未备案"},{value:2,label:"已备案"}],submitObj:{no:"",name:"",planobj:"",plan_obj:{id:"",name:""},plan_type:"",record:"",record_time:"",version:"",departmentobj:"",department_obj:{id:"",name:""},department_id:"",postobj:"",post_obj:{id:"",name:""},post_id:"",note:"",files:[],id:0,type:"add"},formitem:[]}},components:{},props:["par"],beforeMount:function(){},destroyed:function(){},onLoad:function(t){this.getBaseList(t)},mounted:function(){},methods:{getBaseList:function(t){[];var e=[{field:"no",style:{width:"100%"},title:"预案编号",type:"input",props:{placeholder:"请输入"},validate:{type:"string"},value:""},{field:"name",style:{width:"100%"},title:"预案名称",type:"input",props:{placeholder:"请输入"},value:""},{field:"planobj",style:{width:"100%"},options:[],props:{multiple:!1,placeholder:"预案类型",source:"PLAN_TYPE"},title:"预案类型",type:"select",value:""},{field:"record",style:{width:"100%"},options:this.recordType,title:"备案情况",type:"select",props:{placeholder:"请选择"},value:this.recordType[0].value},{field:"record_time",validate:{type:"string",message:"选择时间",required:!0},props:{type:"date",format:"yyyy-MM-dd",placeholder:"选择时间"},style:{width:"100%"},title:"备案时间",type:"date",value:""},{field:"version",style:{width:"100%"},title:"版本号",type:"input",props:{placeholder:"请输入"},value:""},{field:"departmentobj",style:{width:"100%"},options:[],props:{multiple:!1,placeholder:"责任部门",source:"828"},title:"责任部门",type:"select",value:""},{field:"postobj",style:{width:"100%"},options:[],props:{multiple:!1,placeholder:"岗位",source:"5"},title:"岗位",type:"select",value:""},{field:"note",style:{width:"100%"},title:"备注",type:"input",props:{placeholder:"请输入"},value:""},{field:"files",title:"附件",type:"upload",value:[]}];this.show=!0,this.formitem=e},success:function(){for(var t=this,e=this.submitObj,i=0;i<e.length;i++)JSON.stringify(e[i]);this.submitObj.files=this.submitObj.files.toString(),n.api.post_enemergency_plan_edit(this.submitObj,(function(e){console.log(e),t.$refs.uToast.show({title:"已成功",type:"success"}),setTimeout((function(){a.wxapi.openUrl("/pages/emergency/plan-list?tabIndex=0")}),500)}),(function(e){t.disabled=!1}))},trigger:function(t){"planobj"==t.detail.field&&(this.submitObj.plan_obj.name=t.detail.tmp,this.submitObj.plan_obj.id=t.detail.value,this.submitObj.plan_type=t.detail.value),"departmentobj"==t.detail.field&&(this.submitObj.department_obj.name=t.detail.tmp,this.submitObj.department_obj.id=t.detail.value,this.submitObj.department_id=t.detail.value),"postobj"==t.detail.field&&(this.submitObj.post_obj.name=t.detail.tmp,this.submitObj.post_obj.id=t.detail.value,this.submitObj.post_id=t.detail.value);var e=t.detail.field;o.tool.cacheFormData(this.app_id,t.detail.formid,e,t.detail.value,t.detail.misc);var i=Object.assign({},this.submitObj),a=e.split("|"),n=getApp({allowDefault:!0});if(void 0==n.globalData.form_data&&(n.globalData.form_data={}),n.globalData.form_data.nid=this.nid,3==a.length){e=a[0];var r=a[1],l=a[2],s=[];if(t.detail.value instanceof Array?"upload"==t.detail.type?s=t.detail.value:t.detail.value.forEach((function(t){t instanceof Object?s.push({value:t.id,label:t.title}):s.push(t)})):(s=null,4==t.detail.formid&&(0==l&&"date_8"==a[1]?getApp({allowDefault:!0}).globalData.fireEvent("change-date",{field:"date_10",value:t.detail.value}):"date_9"==a[1]&&l>=this.lastRowIndex&&(getApp({allowDefault:!0}).globalData.fireEvent("change-date",{field:"date_11",value:t.detail.value}),this.setData({lastRowIndex:l})))),void 0==i[e]){var d={};d[r]=null==s?t.detail.value:s,d["sort"]=l,i[e]=[d]}else{var u=!1,c=i[e];for(var p in c)if(c[p].sort==l){c[p][r]=null===s?t.detail.value:s,u=!0;break}if(!u){var f={};f[r]=null===s?t.detail.value:s,f["sort"]=l,i[e].push(f)}}}else{var m=[];t.detail.value instanceof Array?"upload"==t.detail.type||"casader"==t.detail.type?m=t.detail.value:"basket"==t.detail.type||t.detail.value.forEach((function(t){m.push({value:t.id,label:t.title})})):m=null,i[e]=null===m?t.detail.value:m}this.setData({submitObj:i})},trigger_del:function(t){var e=t.detail.value,i=t.detail.field,a=Object.assign({},this.submitObj);if(void 0!=a[i])for(var n in a[i])a[i][n].sort==e&&a[i].splice(n,1);o.tool.removeFormData(t.detail.formid,t.detail.field,t.detail.value),this.setData({submitObj:a})}}});e.default=r},"2c81":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uButton:i("f005").default,uToast:i("6c56").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{},[t.show?i("v-uni-view",{},[t._l(t.formitem,(function(e,a){return i("v-uni-view",{staticStyle:{"border-bottom":"1px solid #DEDEDE"}},["input"==e.type?i("v-uni-view",{},[i("v-input",{attrs:{item:e,index:a},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"inputselect"==e.type?i("v-uni-view",{},[i("v-inputselect",{attrs:{item:e,index:a},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"date"==e.type?i("v-uni-view",{staticClass:"item"},[i("v-date",{attrs:{formid:t.formitem.formid,item:e,index:a},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"select"==e.type?i("v-uni-view",{staticClass:"item"},[i("v-select",{attrs:{formid:t.formitem.formid,item:e,index:a},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"upload"==e.type?i("v-uni-view",{staticClass:"item"},[i("v-upload",{attrs:{formid:t.formitem.formid,item:e,index:a},on:{trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e(),"dynamic"==e.type?i("v-uni-view",{staticClass:"item"},[i("v-task-add-group",{attrs:{readonly:void 0!=t.formitem.readonly&&t.formitem.readonly,should_append:t.formitem.append,item:e.row,formid:t.formitem.formid,basket:t.formitem.basket,groupby:e.groupby,field:e.field,target_title:e.target_title,position:e.position,action:Number(t.formitem.action),target:e.target},on:{"trigger-del":function(e){arguments[0]=e=t.$handleEvent(e),t.trigger_del.apply(void 0,arguments)},trigger:function(e){arguments[0]=e=t.$handleEvent(e),t.trigger.apply(void 0,arguments)}}})],1):t._e()],1)})),i("v-uni-view",{staticStyle:{"text-align":"center",padding:"30upx 20upx"}},[i("u-button",{staticStyle:{height:"100%",margin:"10upx 70upx",color:"white",padding:"8upx 50upx"},attrs:{text:"保存",type:"primary",disabled:t.disabled,size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.success.apply(void 0,arguments)}}},[t._v("保存")])],1)],2):t._e(),i("u-toast",{ref:"uToast"})],1)},o=[]},"4cc6":function(t,e,i){"use strict";i.r(e);var a=i("2c81"),n=i("6134");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("714c");var r=i("828b"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"70c790b4",null,!1,a["a"],void 0);e["default"]=l.exports},"4cf6":function(t,e,i){var a=i("fad4");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("9ad8b16a",a,!0,{sourceMap:!1,shadowMode:!1})},"5c1b":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("5ef2"),i("dc8a"),i("5c47"),i("0506");var a={name:"u-toast",props:{zIndex:{type:[Number,String],default:""}},data:function(){return{isShow:!1,timer:null,config:{params:{},title:"",type:"",duration:2e3,isTab:!1,url:"",icon:!0,position:"center",callback:null,back:!1},tmpConfig:{}}},computed:{iconName:function(){if(["error","warning","success","info"].indexOf(this.tmpConfig.type)>=0&&this.tmpConfig.icon){var t=this.$u.type2icon(this.tmpConfig.type);return t}},uZIndex:function(){return this.isShow?this.zIndex?this.zIndex:this.$u.zIndex.toast:"999999"}},methods:{show:function(t){var e=this;this.tmpConfig=this.$u.deepMerge(this.config,t),this.timer&&(clearTimeout(this.timer),this.timer=null),this.isShow=!0,this.timer=setTimeout((function(){e.isShow=!1,clearTimeout(e.timer),e.timer=null,"function"===typeof e.tmpConfig.callback&&e.tmpConfig.callback(),e.timeEnd()}),this.tmpConfig.duration)},hide:function(){this.isShow=!1,this.timer&&(clearTimeout(this.timer),this.timer=null)},timeEnd:function(){if(this.tmpConfig.url){if("/"!=this.tmpConfig.url[0]&&(this.tmpConfig.url="/"+this.tmpConfig.url),Object.keys(this.tmpConfig.params).length){var t="";/.*\/.*\?.*=.*/.test(this.tmpConfig.url)?(t=this.$u.queryParams(this.tmpConfig.params,!1),this.tmpConfig.url=this.tmpConfig.url+"&"+t):(t=this.$u.queryParams(this.tmpConfig.params),this.tmpConfig.url+=t)}this.tmpConfig.isTab?uni.switchTab({url:this.tmpConfig.url}):uni.navigateTo({url:this.tmpConfig.url})}else this.tmpConfig.back&&this.$u.route({type:"back"})}}};e.default=a},6134:function(t,e,i){"use strict";i.r(e);var a=i("2251"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"6c56":function(t,e,i){"use strict";i.r(e);var a=i("c378"),n=i("b49b");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("a148");var r=i("828b"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"36307caf",null,!1,a["a"],void 0);e["default"]=l.exports},"714c":function(t,e,i){"use strict";var a=i("4cf6"),n=i.n(a);n.a},a148:function(t,e,i){"use strict";var a=i("cfeb"),n=i.n(a);n.a},b49b:function(t,e,i){"use strict";i.r(e);var a=i("5c1b"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},c378:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uIcon:i("0d1c").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-toast",class:[t.isShow?"u-show":"","u-type-"+t.tmpConfig.type,"u-position-"+t.tmpConfig.position],style:{zIndex:t.uZIndex}},[i("v-uni-view",{staticClass:"u-icon-wrap"},[t.tmpConfig.icon?i("u-icon",{staticClass:"u-icon",attrs:{name:t.iconName,size:30,color:t.tmpConfig.type}}):t._e()],1),i("v-uni-text",{staticClass:"u-text"},[t._v(t._s(t.tmpConfig.title))])],1)},o=[]},cfeb:function(t,e,i){var a=i("0c6e");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("5080b040",a,!0,{sourceMap:!1,shadowMode:!1})},fad4:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,".bottom[data-v-70c790b4]{display:flex;justify-content:space-between;padding:%?18?% %?10?%;opacity:.8;font-size:%?32?%;border-bottom:1px solid #dedede}",""]),t.exports=e}}]);