(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-safe-risk-search"],{"1b3d":function(e,t,a){"use strict";a.r(t);var s=a("56a7"),i=a("a8bc");for(var l in i)["default"].indexOf(l)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(l);a("9c82");var n=a("828b"),o=Object(n["a"])(i["default"],s["b"],s["c"],!1,null,"6583c4cd",null,!1,s["a"],void 0);t["default"]=o.exports},"4ee9":function(e,t,a){var s=a("70ff");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("967d").default;i("2183d182",s,!0,{sourceMap:!1,shadowMode:!1})},"56a7":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return s}));var s={uButton:a("f005").default,uPopup:a("f6fd").default,uField:a("2e80").default,uSelect:a("e0e7").default,uCalendar:a("c8c4").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-scroll-view",{staticClass:"message-list-container",attrs:{"scroll-y":"true"},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.scrolltolower.apply(void 0,arguments)}}},[e.list.length>0?a("v-uni-view",{staticClass:"list"},e._l(e.list,(function(t,s){return a("v-uni-view",{key:s,staticClass:"item",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.gotoDetail(t)}}},[a("v-uni-view",{staticClass:"xuhao"},[a("v-uni-text",{class:{active:0==t.status}},[e._v(e._s(s+1))])],1),a("v-uni-view",{staticClass:"left"},[a("v-uni-view",{staticClass:"top"},[a("v-uni-view",{staticClass:"user_name"},[e._v(e._s(t.send_user_name))]),a("v-uni-view",{staticClass:"message_type"},[e._v(e._s(e.typeVal(t.process_id)))]),a("v-uni-view",{staticClass:"created_at"},[e._v(e._s(e.shortTime(t.created_at)))])],1),a("v-uni-view",{staticClass:"bot"},[a("v-uni-view",[a("span",{staticStyle:{width:"250upx",display:"inline-block"}},[e._v(e._s(t.title))]),a("span",{staticStyle:{width:"250upx",display:"inline-block"}}),a("u-button",{staticStyle:{display:"inline-block",padding:"0 15upx",height:"35upx","line-height":"35upx"},attrs:{size:"mini",type:"primary"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.process(t,s)}}},[e._v("进度")])],1)],1),e.num==s?a("v-uni-view",[a("p",[a("Process",{attrs:{procsslist:e.procsslist}})],1)]):e._e()],1)],1)})),1):e._e(),0==e.list.length?a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticStyle:{"margin-top":"40px",width:"100%","text-align":"center"}},[e._v("暂无数据")])],1):e._e(),a("v-uni-view"),a("u-popup",{attrs:{mode:"bottom"},model:{value:e.seachshow,callback:function(t){e.seachshow=t},expression:"seachshow"}},[a("v-uni-view",{},[a("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.statusShow=!0}}},[a("u-field",{attrs:{disabled:!0,label:"任务状态",placeholder:"请选择任务状态"},model:{value:e.statusName,callback:function(t){e.statusName=t},expression:"statusName"}})],1),a("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.msgtypeshow=!0}}},[a("u-field",{attrs:{label:"任务类型",disabled:!0,placeholder:"请选择任务类型"},model:{value:e.msgtypeName,callback:function(t){e.msgtypeName=t},expression:"msgtypeName"}})],1),a("v-uni-view",{},[a("u-field",{attrs:{label:"发送人",placeholder:"发送人"},model:{value:e.pages.sender,callback:function(t){e.$set(e.pages,"sender",t)},expression:"pages.sender"}})],1),a("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deteShow=!0}}},[a("u-field",{attrs:{label:"时间",disabled:!0,placeholder:"请选择时间"},model:{value:e.deteName,callback:function(t){e.deteName=t},expression:"deteName"}})],1),a("v-uni-view",{staticClass:"seachBnt",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.seach.apply(void 0,arguments)}}},[e._v("搜索")])],1)],1),a("u-select",{attrs:{list:e.statuslist},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirmStatus.apply(void 0,arguments)}},model:{value:e.statusShow,callback:function(t){e.statusShow=t},expression:"statusShow"}}),a("u-select",{attrs:{list:e.selectlist},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)}},model:{value:e.msgtypeshow,callback:function(t){e.msgtypeshow=t},expression:"msgtypeshow"}}),a("u-calendar",{attrs:{mode:"range"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.Datechange.apply(void 0,arguments)}},model:{value:e.deteShow,callback:function(t){e.deteShow=t},expression:"deteShow"}})],1)},l=[]},"70ff":function(e,t,a){var s=a("c86c");t=s(!1),t.push([e.i,".seachBnt[data-v-6583c4cd]{width:90%;margin:%?20?% auto;line-height:%?80?%;text-align:center;color:#fff;font-size:%?36?%;margin-top:%?200?%;background-color:#1c77dc;border-radius:%?40?%}.message-list-container[data-v-6583c4cd]{position:absolute;left:0;bottom:0;top:%?0?%;right:0}.item[data-v-6583c4cd]{width:100%;padding:%?20?%;box-sizing:border-box;display:flex}.item > .xuhao[data-v-6583c4cd]{width:%?80?%;display:flex;margin-top:%?25?%;position:relative}.item > .xuhao > uni-text[data-v-6583c4cd]{width:%?60?%;height:%?60?%;font-size:%?24?%;text-align:center;line-height:%?60?%;color:#fff;background-color:#00b26a;border-radius:50%}.item > .xuhao > uni-text.active[data-v-6583c4cd]{background-color:#f50}.item > .left[data-v-6583c4cd]{flex:1;border-bottom:%?1?% solid #f1f1f1;padding:%?10?% 0}.item > .left > .top[data-v-6583c4cd]{width:100%;display:flex;margin-bottom:%?20?%}.item > .left > .top > .user_name[data-v-6583c4cd]{font-size:%?24?%;width:%?250?%}.item > .left > .top > .message_type[data-v-6583c4cd]{font-size:%?24?%;padding:0 %?10?%}.item > .left > .top > .created_at[data-v-6583c4cd]{font-size:%?24?%;color:#999;flex:1;text-align:right}.item > .left > .bot[data-v-6583c4cd]{width:%?600?%;font-size:%?28?%;height:%?40?%;line-height:%?40?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""]),e.exports=t},"9c82":function(e,t,a){"use strict";var s=a("4ee9"),i=a.n(s);i.a},a8bc:function(e,t,a){"use strict";a.r(t);var s=a("d32b"),i=a.n(s);for(var l in s)["default"].indexOf(l)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(l);t["default"]=i.a},d32b:function(e,t,a){"use strict";a("6a54");var s=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("b7c7"));a("5ef2"),a("c223"),a("dd2b");var l=s(a("c67a")),n=a("4241"),o=a("1575"),c=(a("6e31"),a("650e"),{data:function(){return{num:-1,procsslist:[],statusName:"",statusShow:!1,renName:"",msgtypeName:"",msgtypeshow:!1,deteShow:!1,deteName:"",seachshow:!1,tabLIstanbul:[{name:"消息",type:1},{name:"通知",type:2}],statuslist:[{label:"全部",value:0},{label:"待处理",value:1},{label:"已完成",value:2},{label:"已删除",value:3}],selectlist:[{label:"不限",value:""},{label:"事故整改",value:"15"},{label:"安全检查",value:"12"},{label:"隐患整改",value:"11"},{label:"作业许可",value:"8"},{label:"岗位自查",value:"7"},{label:"检查风险",value:"6"},{label:"隐患上报",value:"2"},{label:"决议跟踪",value:"1"},{label:"计划变更",value:"14"},{label:"违章处理",value:"13"},{label:"请假审批",value:"10"},{label:"应急处理",value:"9"},{label:"教育培训",value:"5"},{label:"工作任务",value:"4"},{label:"值班管理",value:"3"}],tabIndex:0,list:[],startX:0,pages:{page:1,begin:"",end:"",type:12,sender:"",dep:"",ename:"",status:0,del:0},page:1,type:0,showPanel:!1,numshow:"",twoshow:!1}},components:{Process:l.default},props:{},onLoad:function(e){this.setData({})},watch:{$route:{handler:function(e,t){-1!=e.path.indexOf("/pages/message")&&(this.pages.page=1,this.list=[],this.load_data())},deep:!0}},created:function(){this.load_data()},computed:{},methods:{process:function(e,t){console.log(e.id,"00000000000000"),this.numshow!=e.id?(console.log("不"),this.twoshow=!0,this.numshow=e.id,this.getinfo(e.process_inst_id,t)):(this.twoshow=!1,console.log("等"),this.numshow="",this.num=1e5)},getinfo:function(e,t){var a=this,s={process_inst_id:e};n.api.task_get_info(s,(function(e){a.procsslist=e.data,a.num=t}))},fresh:function(){this.pages.page=1,this.list=[],this.load_data()},shortTime:function(e){return e.substr(5,11)},confirmStatus:function(e){this.pages.status=e[0].value,this.statusName=e[0].label},confirm:function(e){this.pages.type=e[0].value,this.msgtypeName=e[0].label},Datechange:function(e){this.pages.begin_time=e.startDate,this.pages.end_time=e.endDate,this.deteName=e.startDate+"至"+e.endDate},typeVal:function(e){return 15==e?"事故整改":12==e?"安全检查":11==e?"隐患整改":8==e?"作业许可":7==e?"岗位自查":6==e?"检查风险":2==e?"隐患上报":1==e?"决议跟踪":14==e?"计划变更":13==e?"违章处理":10==e?"请假审批":9==e?"应急处理":5==e?"教育培训":4==e?"工作任务":3==e?"值班管理":void 0},scrolltolower:function(){this.load_data()},seach:function(){this.list=[],this.pages.page=1,this.load_data()},load_data:function(){var e=this;n.api.task_get_list(this.pages,(function(t){e.seachshow=!1,uni.hideNavigationBarLoading(),t.data.list.length<=0||(e.pages.page++,e.list=[].concat((0,i.default)(e.list),(0,i.default)(t.data.list)))}))},handleBtn:function(e){this.seachshow=!0},gotoDetail:function(e){o.wxapi.openUrl("/pages/task/form?task_id="+e.id+"&app_id=0&trans_id="+e.process_inst_id)},del:function(e){var t=e.detail,a=this;uni.showModal({title:"提示",content:"确定删除消息吗？",success:function(e){if(e.confirm){var s=(0,i.default)(a.list);s.splice(t,1),a.setData({list:s})}else e.cancel&&console.log("用户点击取消")}})}}});t.default=c}}]);